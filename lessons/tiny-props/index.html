<!DOCTYPE html>
<html lang="en" class="no-js">

<!-- /tiny-props/  Mon, 24 Jan 2022 10:07:50 GMT -->
<!-- OpenDir --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /OpenDir -->
<head>
    <meta charset="UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>

<title>üõ†Ô∏è Tiny: Passing Props | Learn JavaScript</title>
<meta name="description" content="Learn JavaScript student portal"/>
<link rel="canonical" href="index.html">


<!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="../../favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicons/favicon-16x16.png">
<link rel="manifest" href="../../favicons/site.webmanifest">
<link rel="mask-icon" href="../../favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="../../favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#ffc40d">
<meta name="msapplication-config" content="../../favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- CSS -->
<link rel="stylesheet" href="../../css/styles-min-afc4baccb2.css">

<!-- Fonts -->
<script>
  (function (d) {
    var config = {
        kitId: 'gas0cwl',
        scriptTimeout: 3000,
        async: true
      },
      h = d.documentElement,
      t = setTimeout(function () {
        h.className = h
          .className
          .replace(/\bwf-loading\b/g, "") + " wf-inactive";
      }, config.scriptTimeout),
      tk = d.createElement("script"),
      f = false,
      s = d.getElementsByTagName("script")[0],
      a;
    h.className += " wf-loading";
    tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
    tk.async = true;
    tk.onload = tk.onreadystatechange = function () {
      a = this.readyState;
      if (f || a && a != "complete" && a != "loaded")
        return;
      f = true;
      clearTimeout(t);
      try {
        Typekit.load(config)
      } catch (e) {}
    };
    s
      .parentNode
      .insertBefore(tk, s)
  })(document);
</script>

<script>
  document
    .documentElement
    .classList
    .remove('no-js')
</script>

</head>

  <body class="page">
      <nav class="main-nav" data-js="menu" data-state="closed">
        <div>
          <a href="../index.html"><svg
  class="logo"
  data-size="small"
  height="1em"
  viewbox="0 0 273 43"
  xmlns="http://www.w3.org/2000/svg"
>
  <g transform="translate(-1 -10)" fill="none" fill-rule="evenodd">
    <rect fill="#F8E201" x="31" y="11" width="217" height="42" />
    <path
      d="M5.21 44.261v-5.217c0-2.726-.706-4.418-3.902-5.076v-3.76c3.196-.705 3.901-2.209 3.901-4.841v-6.11c0-4.606 2.68-8.178 8.695-8.178h1.551v3.995c-3.948 0-5.546 1.645-5.546 5.264v4.23c0 3.196-.94 6.345-4.136 7.473 3.102 1.175 4.136 4.042 4.136 7.05v4.089c0 4.183 1.598 5.828 5.546 5.828v3.995h-1.55c-5.782 0-8.696-3.243-8.696-8.742zm263.967-5.217l.141 5.217c-.141 5.499-2.961 8.742-8.789 8.742h-1.551v-3.995c3.948 0 5.499-1.645 5.499-5.828v-4.089c0-3.008 1.081-5.875 4.183-7.05-3.196-1.128-4.183-4.277-4.183-7.473v-4.23c0-3.619-1.551-5.264-5.499-5.264v-3.995h1.551c5.969 0 8.648 3.572 8.648 8.178v6.11c0 2.632.705 4.136 3.901 4.841v3.76c-3.196.658-3.901 2.35-3.901 5.076z"
      fill="#000"
      fill-rule="nonzero"
    />
    <path
      d="M29.82 52V11.5h7.74v34.56h17.46V52h-25.2zM58.2 37.78c0-8.16 3.54-16.32 13.68-16.32 8.4 0 12.18 5.1 12.18 13.62 0 .96-.06 1.92-.12 3H65.76c.06 7.44 3 9.36 6.54 9.36 2.76 0 5.52-1.2 5.52-4.2 0-.24-.06-.48-.06-.78l6 .84c.06.3.06.66.06 1.02 0 5.4-5.28 8.4-11.76 8.4-8.04 0-13.86-4.62-13.86-14.94zm13.62-11.7c-2.76 0-5.04 2.04-5.82 7.5h10.56v-1.02c0-3.48-1.38-6.48-4.74-6.48zM88.2 44.26c0-6.36 6.06-9.54 12.42-9.54 2.64 0 4.02.6 4.62.96v-4.32c0-3.42-1.32-5.1-4.44-5.1-3.66 0-4.8 2.4-3.96 5.7l-7.02-.78c-1.56-6.84 4.2-9.72 11.4-9.72 7.98 0 11.34 3.48 11.34 9.9v13.26c0 1.38.36 2.04 1.2 2.04 1.08 0 1.92-.96 1.92-.96l.42 5.22s-2.04 1.5-4.92 1.5c-2.94 0-4.98-1.5-5.46-4.62-1.56 2.94-4.56 4.92-8.46 4.92-5.16 0-9.06-3.48-9.06-8.46zm11.28 3.18c2.46 0 4.26-1.38 5.76-3.06v-5.16c-.6 0-1.38-.06-2.34-.06-4.8 0-7.44 1.44-7.44 4.62 0 2.46 1.62 3.66 4.02 3.66zM120.96 52V22.18h5.58l1.02 5.52c1.2-3.18 3.6-6.24 8.1-6.24 6.24 0 7.62 6.66 5.7 11.28l-6.3.84c.84-2.4.96-6-2.04-6-2.64 0-3.96 2.46-4.68 4.56V52h-7.38zm25.86 0V22.18h5.58l.9 4.86c2.22-3.24 4.68-5.58 9.36-5.58 5.04 0 8.88 2.82 8.88 9.18V52h-7.38V32.08c0-3.24-1.2-4.68-3.96-4.68-2.64 0-4.44 1.26-6 2.88V52h-7.38zm47.46-34.86V11.5h17.46v28.8c0 7.5-4.2 12.42-12.18 12.42-8.52 0-13.14-5.52-10.98-13.5l6.84-.72c-1.26 5.16-.06 8.4 3.96 8.4 3.06 0 4.62-1.92 4.62-5.58V17.14h-9.72zm23.94 22.62l6.9-.72c-1.08 4.26 1.2 7.98 8.1 7.98 5.46 0 7.2-2.4 7.2-5.16 0-3.66-3.3-5.04-8.04-6.66-5.76-1.98-13.44-4.38-13.44-12.84 0-7.2 5.52-11.7 14.88-11.58 11.04.12 14.94 6.42 13.74 13.32l-7.32.72c.78-5.76-1.56-8.46-6.96-8.46-4.56 0-6.54 2.04-6.54 5.04 0 4.02 3.72 5.34 8.4 6.9 6.06 1.98 13.02 4.32 13.02 12.36 0 6.84-5.1 12.06-15.24 12.06-9.48 0-16.08-4.5-14.7-12.96z"
      fill="#000"
      fill-rule="nonzero"
    />
  </g>
</svg>
</a>
          <button data-type="secondary" data-js="menu-button">Menu</button>
        </div>
        <div>
          <a href="../index.html">Contents</a>
          <a href="../../components/index.html">Components</a>
          <a href="../../community/index.html">Community</a>
          <a href="../../extras/index.html">Extras</a>
        </div>
        <div>
          <a href="../..https://nerd-dir.com">Account</a>
          <button data-type="secondary" data-js="logout">OpenDir</button>
        </div>
      </nav>

    <noscript>
      <div class="wrap">
        This portal uses JavaScript to check your identity. Please enable JavaScript to access the course.
      </div>
    </noscript>

    <main>
      <div class="wrap">
<div
  data-js="check-auth"
  data-required-authorization="mastery"
  data-auth-state="failure"
>
  <article class="longform" data-failed-content>
    <h1>üõ†Ô∏è Tiny: Passing Props</h1>
    <p>Hey <span data-js="user-data" data-field="firstName">,</p>
      <p>
      I'm thrilled to help you learn JavaScript. Unfortunately, you've landed on a page where you cannot access with your current purchase.
    </p>
      <p>
      Please upgrade (<a href="../../404/index.html" data-upgrade-link
        >use this link</a
      >) access this content.
    </p>

      <p>I'm super eager to help you learn more!</p>
    </article>

    <article class="longform" data-content>
      <h1>üõ†Ô∏è Tiny: Passing Props</h1>



      <div class="meta source-code">


    <a href="../../download/components/tiny/07.pass-props.zip">
      <svg class="icon" viewBox="0 0 20 20" height="1em">
        <path fill="currentColor" d="M.7 9.3l4.8-4.8 1.4 1.42L2.84 10l4.07 4.07-1.41 1.42L0 10l.7-.7zm18.6 1.4l.7-.7-5.49-5.49-1.4 1.42L17.16 10l-4.07 4.07 1.41 1.42 4.78-4.78z"/>
      </svg>
      <span>Source</span>
    </a>
      </div><p>To make the Total Count component, we need to get the count from both parent and child components. One way to do this is to pass properties down into Total Count. (We call this <code>props</code> for short).</p>
<p>Here‚Äôs what Total Count looks like at this point:</p>
<pre><code class="language-javascript">// total-count.js
export default Tiny({
  template () {
    return `
      &lt;div class=&quot;component total-component flow text&quot;&gt;
        &lt;h2&gt;Total Count&lt;/h2&gt;
        &lt;ul&gt;
          &lt;li&gt;Parent Count: ${this.state.count}&lt;/li&gt;
          &lt;li&gt;Child Count: ${this.state.childCount}&lt;/li&gt;
          &lt;li&gt;Total Count: ${this.state.count + this.state.childCount}&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    `
  }
})
</code></pre>
<p>We‚Äôll start Total Count by importing it into the parent component.</p>
<pre><code class="language-javascript">// main.js
import totalCount from './total-count.js'

Tiny({
  // ...
  components: {
    child,
    totalCount
  },
  // ...
  template () {
    return `
      &lt;div class=&quot;component parent-component flow&quot;&gt;
        &lt;!-- ... --&gt;
        &lt;div class=&quot;half&quot;&gt;
          &lt;div tiny-component=&quot;child&quot;&gt;&lt;/div&gt;
          &lt;div tiny-component=&quot;totalCount&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    `
  }
})
</code></pre>
<p>When you do this you‚Äôll encounter an error that says <code>Cannot read property 'count' of undefined</code>.</p>
<figure role="figure">
  <img src="../../images/components/tiny/pass-props/error-count.png" alt="">
</figure>
<p>This error occurs because Total Count doesn‚Äôt have <code>count</code> and <code>childCount</code> declared in its state. We‚Äôll remove these two properties for now since we‚Äôre going to pass props down from the parent component.</p>
<h2 id="passing-props-down-from-parents">Passing props down from parents</h2>
<p>We can pass props down with a <code>tiny-props</code> custom attribute. Each prop will contain a property name and a value like this:</p>
<pre><code class="language-javascript">Tiny({
  // ...
  template () {
    return `
      &lt;div
        class=&quot;component parent-component flow&quot;
        ...
      &gt;
        &lt;div class=&quot;half&quot;&gt;
          &lt;!-- ... --&gt;
          &lt;div tiny-component=&quot;totalCount&quot; tiny-props=&quot;[parentCount, 10]&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    `
	}
})
</code></pre>
<p>We want to be able to use the <code>parentCount</code> prop in Total Count like this:</p>
<pre><code class="language-javascript">// total-count.js
export default Tiny({
  template () {
    return `
      &lt;div class=&quot;component total-component flow text&quot;&gt;
        &lt;h2&gt;Total Count&lt;/h2&gt;
        &lt;ul&gt;
          &lt;li&gt;Parent Count: ${this.props.parentCount}&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    `
  }
})
</code></pre>
<p>To do this, we need to add <code>tiny-props</code> values into the component before we render it.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _renderChildComponents (options) {
    // ...
    for (const compEl of compEls) {
      // ...
      // Add props here
      _render(comp)
      _addEventListeners(comp)
    }
  }
}
</code></pre>
<p>To add props, we need to get the prop string with <code>getAttribute</code></p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _renderChildComponents (options) {
    // ...
    for (const compEl of compEls) {
      // ...
      const attribute = compEl.getAttribute('tiny-props')
    }
    // ...
  }
}
</code></pre>
<p>If the element contains props, we want to extract these props into a property-value pair. We can use the same code we wrote for the event listeners here.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _renderChildComponents (options) {
    // ...
    for (const compEl of compEls) {
      // ...
      const attribute = compEl.getAttribute('tiny-props')
      if (attribute) {
        const props = attribute
          .replace('[', '')
          .replace(']', '')
          .split(',')
          .map(l =&gt; l.trim())
        console.log(props)
      }
    }
    // ...
  }
}
</code></pre>
<figure role="figure">
  <img src="../../images/components/tiny/pass-props/array.png" alt="">
</figure>
<p>As I mentioned before, the downside to passing values via custom attributes is everything gets converted into strings. So we can‚Äôt simply accept values via the <code>tiny-props</code> property. We need a way to transfer other types into the child component. We‚Äôll work on this later.</p>
<p>At this point, we can set the property-value pair into a <code>props</code> object.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _renderChildComponents (options) {
    // ...
    for (const compEl of compEls) {
      // ...
      const attribute = compEl.getAttribute('tiny-props')
      if (attribute) {
        // ...
        comp.props[props[0]] = props[1]
      }
    }
    // ...
  }
}
</code></pre>
<p>You‚Äôll see an error that says <code>Cannot set property 'parentCount' of undefined</code>.</p>
<figure role="figure">
  <img src="../../images/components/tiny/pass-props/error-parent-count.png" alt="">
</figure>
<p>This error happens because <code>Tiny</code> doesn‚Äôt contain a props object yet. We can fix this by passing a <code>props</code> object when we initialize Tiny.</p>
<pre><code class="language-javascript">const initial = {
  // ...
  props: {}
}

export default function Tiny (options) {
  options = Object.assign({}, initial, options)
  // ...
}
</code></pre>
<figure role="figure">
  <img src="../../images/components/tiny/pass-props/props.png" alt="">
</figure>
<h2 id="passing-other-kinds-of-values">Passing other kinds of values</h2>
<p>We can pass other values by writing the key to a property in <code>tiny-props</code>. For example, we can pass the entire state object by writing <code>state</code></p>
<pre><code class="language-javascript">Tiny({
  // ...
  template () {
    return `
      &lt;div ... &gt;
        // ...
        &lt;div class=&quot;half&quot;&gt;
          &lt;div tiny-component=&quot;child&quot;&gt;&lt;/div&gt;
          &lt;div tiny-component=&quot;totalCount&quot; tiny-props=&quot;[parentState, state]&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    `
  }
})
</code></pre>
<p>In Tiny, we can check whether the passed value is a property in the component. If that‚Äôs the case, we send the property‚Äôs value into the child component. Otherwise, we simply send it as a hard-coded string.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _renderChildComponents (options) {
    // ...
    for (const compEl of compEls) {
      // ...
      const attribute = compEl.getAttribute('tiny-props')
      if (attribute) {
        // ...
        const prop = props[0]
        const value = props[1]
        if (options[value]) {
          comp.props[prop] = options[value]
        } else {
          comp.props[prop] = value
        }
      }
    }
    // ...
  }
}
</code></pre>
<p>We can now get the parent‚Äôs count like this:</p>
<pre><code class="language-javascript">// total-count.js
export default Tiny({
  template () {
    return `
      &lt;div class=&quot;component total-component flow text&quot;&gt;
        &lt;h2&gt;Total Count&lt;/h2&gt;
        &lt;ul&gt;
          &lt;li&gt;Parent Count: ${this.props.parentState.count}&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    `
  }
})
</code></pre>
<p>The count will be updated when the parent‚Äôs state changes.</p>
<video autoplay loop>
  <source src="../../images/components/tiny/pass-props/pass-state.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/tiny/pass-props/pass-state.mp4"> here </a> instead.
</video>
<h2 id="passing-state-values">Passing state values</h2>
<p>Children components don‚Äôt need the entire parent‚Äôs state most of the time, so we want to pass values that matters.</p>
<p>In this case, we want to pass <code>state.count</code> and not the entire state object.</p>
<pre><code class="language-javascript">Tiny({
  // ...
  template () {
    return `
      &lt;div ... &gt;
        &lt;!-- ... --&gt;
        &lt;div class=&quot;half&quot;&gt;
          &lt;!-- ... --&gt;
          &lt;div tiny-component=&quot;totalCount&quot; tiny-props=&quot;[parentCount, state.count]&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    `
  }
})
</code></pre>
<p>If we tried getting <code>parentCount</code> in <code>totalCount</code> now, we‚Äôll get the string <code>state.count</code>.</p>
<figure role="figure">
  <img src="../../images/components/tiny/pass-props/props-string.png" alt="">
</figure>
<p>This happens because we used the string <code>state.count</code> when searching for a property in the parent component. Since <code>options['state.count']</code>doesn‚Äôt exist as a property, the output value becomes a string.</p>
<p>We need to use <code>options['state']['count']</code> instead of <code>options['state.count']</code> to extract the actual value.</p>
<p>To do this, we need to split <code>state.count</code> with <code>.</code>. Then, we reduce each item in the array into the eventual property.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _renderChildComponents (options) {
    // ...
    for (const compEl of compEls) {
      // ...
      const attribute = compEl.getAttribute('tiny-props')
      if (attribute) {
        // ...
        const prop = props[0]
        const value = props[1]
          .split('.')
          .reduce((acc, current) =&gt; acc[current], options)
        console.log(value)
      }
    }
    // ...
  }
}
</code></pre>
<p>In this case, we get the value, which is a number.</p>
<figure role="figure">
  <img src="../../images/components/tiny/pass-props/number.png" alt="">
</figure>
<p>So we need to check against three cases now:</p>
<ol>
<li>The user passes in a hardcoded value, which is always converted into a string.</li>
<li>The user passes in a value that matches the component‚Äôs property.</li>
<li>The user passes in a nested value like <code>state.count</code>.</li>
</ol>
<p>This three-way flow makes adding props a bit more complex, so we should put the entire segment into its own function. We‚Äôll call this function <code>_addProps</code>.</p>
<pre><code class="language-javascript">function _addProps (comp) {
  // ...
}
</code></pre>
<p>We make a call to this function in <code>_renderChildComponents</code>.</p>
<pre><code class="language-javascript">function _renderChildComponents (options) {
      // ...
      _addProps(comp)
      _render(comp)
      _addEventListeners(comp)
    }
  }
</code></pre>
<p>We‚Äôll copy-paste everything we wrote into this function.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _addProps () {
    // Add props
    const attribute = compEl.getAttribute('tiny-props')
    if (attribute) {
      const props = attribute
        .replace('[', '')
        .replace(']', '')
        .split(',')
        .map(l =&gt; l.trim())

      const prop = props[0]
      const value = props[1]
        .split('.')
        .reduce((acc, current) =&gt; acc[current], options)

      if (options[value]) {
        comp.props[prop] = options[value]
      } else {
        comp.props[prop] = value
      }
    }
  }
  // ...
}
</code></pre>
<p>We will pass in <code>comp</code> into this function and use <code>comp.element</code> instead of <code>compEl</code>.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _addProps (comp) {
    // Add props
    const attribute = comp.element.getAttribute('tiny-props')
    // ...
  }
  // ...
}
</code></pre>
<p>We don‚Äôt need to add props if the element doesn‚Äôt contain a <code>tiny-props</code> attribute, so we can use an early return.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _addProps (comp) {
    // Add props
    const attribute = comp.element.getAttribute('tiny-props')
    if (!attribute) return
    // ...
  }
  // ...
}
</code></pre>
<p>We‚Äôre now ready to tackle the three scenarios. Again, they are:</p>
<ol>
<li>The user passes in a hardcoded value, which is always converted into a string.</li>
<li>The user passes in a value that matches the component‚Äôs property.</li>
<li>The user passes in a nested value like <code>state.count</code>.</li>
</ol>
<p>We can check for a <code>.</code> for the third case, so let‚Äôs begin there.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _addProps (comp) {
    // ...
    const prop = props[0]
    let value = props[1]

    if (value.includes('.')) {
      // Third case
      return
    }

    // First and second case
  }
  // ...
}
</code></pre>
<p>For the third case, we need to perform <code>split</code> and <code>reduce</code> then assign the eventual value as props.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _addProps (comp) {
    // ...
    const prop = props[0]
    let value = props[1]

    if (value.includes('.')) {
      value = value
        .split('.')
        .reduce((acc, current) =&gt; acc[current], options)
      comp.props[prop] = value
      return
    }

    // First and second cases
  }
  // ...
}
</code></pre>
<p>For the second case, we can check whether <code>options[value]</code> is valid. If it is, we‚Äôll pass that value as props.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _addProps (comp) {
    // ...
    if (options[value]) {
      comp.props[prop] = options[value]
      return
    }
  }
  // ...
}
</code></pre>
<p>For the first case, we‚Äôll simply pass the value as props.</p>
<pre><code class="language-javascript">export default function Tiny (options) {
  // ...
  function _addProps (comp) {
    // ...
    comp.props[prop] = value
  }
  // ...
}
</code></pre>
<p>The component should work with all three types of props now.</p>
</article>
  </div>



  <div class="longform">
    <nav class="lesson-nav">

          <a href="../tiny-parent-state/index.html" data-link-to="previous-lesson">
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M18.9 38l3.1-3.1L6.1 19 22 3.1 18.9 0 0 19z"
        ></path>
              </svg>
              <span>üõ†Ô∏è Tiny: Changing Parent State</span>
            </a>
          <a href="../tiny-multiple-props/index.html" data-link-to="next-lesson">
              <span>üõ†Ô∏è Tiny: Multiple Props</span>
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M3.1 0L0 3.1 15.9 19 0 34.9 3.1 38 22 19z"
        ></path>
              </svg>
            </a>
          </nav>
  </div>
</div>
    </main>



      <script module src="../../js/main-b9439821d7.mjs"></script>
      <script nomodule src="../../js/main-legacy-8c54230a8f.js"></script>
  </body>

<!-- /tiny-props/  Mon, 24 Jan 2022 10:07:52 GMT -->
</html>
