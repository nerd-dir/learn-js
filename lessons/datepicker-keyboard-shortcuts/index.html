<!DOCTYPE html>
<html lang="en" class="no-js">

<!-- /datepicker-keyboard-shortcuts/  Mon, 24 Jan 2022 10:05:34 GMT -->
<!-- OpenDir --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /OpenDir -->
<head>
    <meta charset="UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>

<title>üõ†Ô∏è Datepicker: Keyboard shortcuts | Learn JavaScript</title>
<meta name="description" content="Learn JavaScript student portal"/>
<link rel="canonical" href="index.html">


<!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="../../favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicons/favicon-16x16.png">
<link rel="manifest" href="../../favicons/site.webmanifest">
<link rel="mask-icon" href="../../favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="../../favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#ffc40d">
<meta name="msapplication-config" content="../../favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- CSS -->
<link rel="stylesheet" href="../../css/styles-min-afc4baccb2.css">

<!-- Fonts -->
<script>
  (function (d) {
    var config = {
        kitId: 'gas0cwl',
        scriptTimeout: 3000,
        async: true
      },
      h = d.documentElement,
      t = setTimeout(function () {
        h.className = h
          .className
          .replace(/\bwf-loading\b/g, "") + " wf-inactive";
      }, config.scriptTimeout),
      tk = d.createElement("script"),
      f = false,
      s = d.getElementsByTagName("script")[0],
      a;
    h.className += " wf-loading";
    tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
    tk.async = true;
    tk.onload = tk.onreadystatechange = function () {
      a = this.readyState;
      if (f || a && a != "complete" && a != "loaded")
        return;
      f = true;
      clearTimeout(t);
      try {
        Typekit.load(config)
      } catch (e) {}
    };
    s
      .parentNode
      .insertBefore(tk, s)
  })(document);
</script>

<script>
  document
    .documentElement
    .classList
    .remove('no-js')
</script>

</head>

  <body class="page">
      <nav class="main-nav" data-js="menu" data-state="closed">
        <div>
          <a href="../index.html"><svg
  class="logo"
  data-size="small"
  height="1em"
  viewbox="0 0 273 43"
  xmlns="http://www.w3.org/2000/svg"
>
  <g transform="translate(-1 -10)" fill="none" fill-rule="evenodd">
    <rect fill="#F8E201" x="31" y="11" width="217" height="42" />
    <path
      d="M5.21 44.261v-5.217c0-2.726-.706-4.418-3.902-5.076v-3.76c3.196-.705 3.901-2.209 3.901-4.841v-6.11c0-4.606 2.68-8.178 8.695-8.178h1.551v3.995c-3.948 0-5.546 1.645-5.546 5.264v4.23c0 3.196-.94 6.345-4.136 7.473 3.102 1.175 4.136 4.042 4.136 7.05v4.089c0 4.183 1.598 5.828 5.546 5.828v3.995h-1.55c-5.782 0-8.696-3.243-8.696-8.742zm263.967-5.217l.141 5.217c-.141 5.499-2.961 8.742-8.789 8.742h-1.551v-3.995c3.948 0 5.499-1.645 5.499-5.828v-4.089c0-3.008 1.081-5.875 4.183-7.05-3.196-1.128-4.183-4.277-4.183-7.473v-4.23c0-3.619-1.551-5.264-5.499-5.264v-3.995h1.551c5.969 0 8.648 3.572 8.648 8.178v6.11c0 2.632.705 4.136 3.901 4.841v3.76c-3.196.658-3.901 2.35-3.901 5.076z"
      fill="#000"
      fill-rule="nonzero"
    />
    <path
      d="M29.82 52V11.5h7.74v34.56h17.46V52h-25.2zM58.2 37.78c0-8.16 3.54-16.32 13.68-16.32 8.4 0 12.18 5.1 12.18 13.62 0 .96-.06 1.92-.12 3H65.76c.06 7.44 3 9.36 6.54 9.36 2.76 0 5.52-1.2 5.52-4.2 0-.24-.06-.48-.06-.78l6 .84c.06.3.06.66.06 1.02 0 5.4-5.28 8.4-11.76 8.4-8.04 0-13.86-4.62-13.86-14.94zm13.62-11.7c-2.76 0-5.04 2.04-5.82 7.5h10.56v-1.02c0-3.48-1.38-6.48-4.74-6.48zM88.2 44.26c0-6.36 6.06-9.54 12.42-9.54 2.64 0 4.02.6 4.62.96v-4.32c0-3.42-1.32-5.1-4.44-5.1-3.66 0-4.8 2.4-3.96 5.7l-7.02-.78c-1.56-6.84 4.2-9.72 11.4-9.72 7.98 0 11.34 3.48 11.34 9.9v13.26c0 1.38.36 2.04 1.2 2.04 1.08 0 1.92-.96 1.92-.96l.42 5.22s-2.04 1.5-4.92 1.5c-2.94 0-4.98-1.5-5.46-4.62-1.56 2.94-4.56 4.92-8.46 4.92-5.16 0-9.06-3.48-9.06-8.46zm11.28 3.18c2.46 0 4.26-1.38 5.76-3.06v-5.16c-.6 0-1.38-.06-2.34-.06-4.8 0-7.44 1.44-7.44 4.62 0 2.46 1.62 3.66 4.02 3.66zM120.96 52V22.18h5.58l1.02 5.52c1.2-3.18 3.6-6.24 8.1-6.24 6.24 0 7.62 6.66 5.7 11.28l-6.3.84c.84-2.4.96-6-2.04-6-2.64 0-3.96 2.46-4.68 4.56V52h-7.38zm25.86 0V22.18h5.58l.9 4.86c2.22-3.24 4.68-5.58 9.36-5.58 5.04 0 8.88 2.82 8.88 9.18V52h-7.38V32.08c0-3.24-1.2-4.68-3.96-4.68-2.64 0-4.44 1.26-6 2.88V52h-7.38zm47.46-34.86V11.5h17.46v28.8c0 7.5-4.2 12.42-12.18 12.42-8.52 0-13.14-5.52-10.98-13.5l6.84-.72c-1.26 5.16-.06 8.4 3.96 8.4 3.06 0 4.62-1.92 4.62-5.58V17.14h-9.72zm23.94 22.62l6.9-.72c-1.08 4.26 1.2 7.98 8.1 7.98 5.46 0 7.2-2.4 7.2-5.16 0-3.66-3.3-5.04-8.04-6.66-5.76-1.98-13.44-4.38-13.44-12.84 0-7.2 5.52-11.7 14.88-11.58 11.04.12 14.94 6.42 13.74 13.32l-7.32.72c.78-5.76-1.56-8.46-6.96-8.46-4.56 0-6.54 2.04-6.54 5.04 0 4.02 3.72 5.34 8.4 6.9 6.06 1.98 13.02 4.32 13.02 12.36 0 6.84-5.1 12.06-15.24 12.06-9.48 0-16.08-4.5-14.7-12.96z"
      fill="#000"
      fill-rule="nonzero"
    />
  </g>
</svg>
</a>
          <button data-type="secondary" data-js="menu-button">Menu</button>
        </div>
        <div>
          <a href="../index.html">Contents</a>
          <a href="../../components/index.html">Components</a>
          <a href="../../community/index.html">Community</a>
          <a href="../../extras/index.html">Extras</a>
        </div>
        <div>
          <a href="../..https://nerd-dir.com">Account</a>
          <button data-type="secondary" data-js="logout">OpenDir</button>
        </div>
      </nav>

    <noscript>
      <div class="wrap">
        This portal uses JavaScript to check your identity. Please enable JavaScript to access the course.
      </div>
    </noscript>

    <main>
      <div class="wrap">
<div
  data-js="check-auth"
  data-required-authorization="mastery"
  data-auth-state="failure"
>
  <article class="longform" data-failed-content>
    <h1>üõ†Ô∏è Datepicker: Keyboard shortcuts</h1>
    <p>Hey <span data-js="user-data" data-field="firstName">,</p>
      <p>
      I'm thrilled to help you learn JavaScript. Unfortunately, you've landed on a page where you cannot access with your current purchase.
    </p>
      <p>
      Please upgrade (<a href="../../404/index.html" data-upgrade-link
        >use this link</a
      >) access this content.
    </p>

      <p>I'm super eager to help you learn more!</p>
    </article>

    <article class="longform" data-content>
      <h1>üõ†Ô∏è Datepicker: Keyboard shortcuts</h1>



      <div class="meta source-code">

    <a href="../../download/components/datepicker/10.keyboard-shortcuts-starter.zip">
      <svg class="icon" viewBox="0 0 20 20" height="1em">
        <path fill="currentColor" d="M.7 9.3l4.8-4.8 1.4 1.42L2.84 10l4.07 4.07-1.41 1.42L0 10l.7-.7zm18.6 1.4l.7-.7-5.49-5.49-1.4 1.42L17.16 10l-4.07 4.07 1.41 1.42 4.78-4.78z"/>
      </svg>
      <span>Starter</span>
    </a>

    <a href="../../download/components/datepicker/10.keyboard-shortcuts.zip">
      <svg class="icon" viewBox="0 0 20 20" height="1em">
        <path fill="currentColor" d="M.7 9.3l4.8-4.8 1.4 1.42L2.84 10l4.07 4.07-1.41 1.42L0 10l.7-.7zm18.6 1.4l.7-.7-5.49-5.49-1.4 1.42L17.16 10l-4.07 4.07 1.41 1.42 4.78-4.78z"/>
      </svg>
      <span>Source</span>
    </a>
      </div><p>We‚Äôre going to provide users with these keyboard shortcuts:</p>
<ol>
<li>Arrow left: Select previous day</li>
<li>Arrow right: Select next day</li>
<li>Arrow up: Select 7 days before</li>
<li>Arrow down: Select 7 days later</li>
</ol>
<h2 id="better-focus-styles">Better focus styles</h2>
<p>While I worked on this lesson, I realized the focus on each button wasn‚Äôt clear enough. I added some CSS to emphasise them.</p>
<p>Here‚Äôs the CSS I added: (You‚Äôll find them in the starter file).</p>
<pre><code class="language-css">.datepicker_date-grid button:focus {
  box-shadow: inset 0 0 0 2px var(--blue-grey-100);
}

.datepicker_date-grid button.is-selected:focus {
  box-shadow: inset 0 0 0 2px var(--teal-200);
}
</code></pre>
<h2 id="up%2Fdown%2Fleft%2Fright-shortcuts">Up/Down/Left/Right shortcuts</h2>
<p>We only want these shortcuts to work inside the Datepicker. So let‚Äôs start by adding an event listener to the Datepicker.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
})
</code></pre>
<p>This time, we only want to do something if the user presses an arrow key.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  const { key } = event
  if (
    key !== 'ArrowUp' &amp;&amp;
    key !== 'ArrowDown' &amp;&amp;
    key !== 'ArrowLeft' &amp;&amp;
    key !== 'ArrowRight' &amp;&amp;
  ) return
})
</code></pre>
<p>We also want the prevent the default behaviour of any arrow keys (so the browser doesn‚Äôt scroll while the datepicker is active).</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  const { key } = event
  if (
    key !== 'ArrowUp' &amp;&amp;
    key !== 'ArrowDown' &amp;&amp;
    key !== 'ArrowLeft' &amp;&amp;
    key !== 'ArrowRight' &amp;&amp;
  ) return
  event.preventDefault()
})
</code></pre>
<h2 id="focusing-on-the-first-date">Focusing on the first date</h2>
<p>If the user selected a date, we want to focus on that date. Once they have their attention on a date, the next up/down/left/right movement would make sense.</p>
<p>If the user has selected a date, there would be a <code>&lt;button&gt;</code> with an <code>is-selected</code> class.</p>
<p>We will also use a <code>return</code> statement here to prevent further execution of the function.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  const selectedDate = dategrid.querySelector('is-selected')
  const dates = [...dategrid.children]
  if (!selectedDate) {
    dates[0].focus()
    return
  }
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-first-date.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-first-date.mp4"> here </a> instead.
</video>
<h2 id="focusing-on-the-next-date">Focusing on the next date</h2>
<p>Let‚Äôs say the user selects 13 February. If they press the right arrow now, we want to highlight 14 February.</p>
<p>To do this, need to find 14 February. To find 14 February, we need to get the index of the selected date.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  const index = dates.findIndex(d =&gt; d === selectedDate)
  if (key === 'ArrowRight') {
    const nextDate = dates[index + 1]
    nextDate.focus()
  }
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-arrow-right.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-arrow-right.mp4"> here </a> instead.
</video>
<p>We‚Äôve done all we need by now. So we‚Äôll use a <code>return</code> statement here to prevent the function from executing further. This makes it easier to write other conditionals.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowRight') {
    const nextDate = dates[index + 1]
    nextDate.focus()
    return
  }
})
</code></pre>
<p>We can collapse the three statements inside this <code>if</code> condition into one. This makes it easier to read and understand.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowRight') return dates[index + 1].focus()
})
</code></pre>
<h3 id="pressing-right-again">Pressing right again</h3>
<p>Let‚Äôs say the user presses the right arrow key when their focus is on 14 February. In this case, we want to select 15 February. To do this, we need to use the index of the currently focused date (instead of the selected date).</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  let index = dates.findIndex(d =&gt; d === selectedDate)
  const focusedDate = document.activeElement
  if (focusedDate.matches('.datepicker__date')) {
    index = dates.findIndex(d =&gt; d === focusedDate))
  }
  if (key === 'ArrowRight') return dates[index + 1].focus()
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-arrow-right-twice.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-arrow-right-twice.mp4"> here </a> instead.
</video>
<p>We can clean up the code a little by using a ternary operator.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  const index = document.activeElement.matches('.datepicker__date')
    ? dates.findIndex(d =&gt; d === document.activeElement)
    : dates.findIndex(d =&gt; d === selectedDate)
  // ...
})
</code></pre>
<p>We also need to allow the code to reach this point. So, if the user has focus on a date (but did not select a date yet), we don‚Äôt force focus onto the first date.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (!selectedDate &amp;&amp; !document.activeElement.matches('.datepicker__date')) {
    return dates[0].focus()
  }
  // ...
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-next-not-selected.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-next-not-selected.mp4"> here </a> instead.
</video>
<h3 id="pressing-right-on-the-last-day">Pressing right on the last day</h3>
<p>Let‚Äôs say the user press the Right arrow key when their focus is on the last day (28 February). In this case, we want to highlight the first day of the next month (1 March).</p>
<p>Here, we first need to check if they are on the last day. We‚Äôll use another <code>if</code> condition for the checking. We will also put the new <code>if</code> condition before the previous <code>if</code> condition because it‚Äôs more specific.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowRight' &amp;&amp; index === dates.length - 1) {
    // ... Highlight first day of the next month
  }
  if (key === 'ArrowRight') /*...*/
})
</code></pre>
<p>To focus on the next month, we need to change the calendar such that it shows the next month. We can do it by clicking the next month‚Äôs button.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  const nextMonthButton = datepicker.querySelector('.datepicker__next')
  if (key === 'ArrowRight' &amp;&amp; index === dates.length - 1) {
    nextMonthButton.click()
  }
  // ...
})
</code></pre>
<p>We need to find a new set of dates since we changed the calendar‚Äôs HTML. We can find the dates with <code>querySelectorAll</code>.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowRight' &amp;&amp; index === dates.length - 1) {
    // ...
    const dates = datepicker.querySelectorAll('.datepicker__dates')
  }
  // ...
})
</code></pre>
<p>After we find the new set of dates, we can focus on the first day.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowRight' &amp;&amp; index === dates.length - 1) {
    // ...
    const dates = datepicker.querySelectorAll('.datepicker__dates')
    dates[0].focus()
  }
  // ...
})
</code></pre>
<p>We‚Äôve done what we need to. Let‚Äôs use an early return statement so the next <code>if</code> condition doesn‚Äôt trigger.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowRight' &amp;&amp; index === dates.length - 1) {
    // ...
    const dates = datepicker.querySelectorAll('.datepicker__dates')
    dates[0].focus()
    return
  }
  // ...
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-next-month.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-next-month.mp4"> here </a> instead.
</video>
<h2 id="focusing-on-the-previous-day">Focusing on the previous day</h2>
<p>We can repeat the same process to focus on the previous day.</p>
<p>First, we focus on the previous day using the same <code>index</code> value. This time, we subtract 1 from <code>index</code> instead of adding 1 to it.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'LeftArrow') return dates[index + 1].focus()
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-arrow-left-twice.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-arrow-left-twice.mp4"> here </a> instead.
</video>
<h3 id="pressing-left-on-the-first-day">Pressing left on the first day</h3>
<p>If the user presses Left from the first day of the month (1 February), we want to highlight the last day of the previous month (31 January).</p>
<p>To do this, we need a conditional to check if they‚Äôre on the first day.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'LeftArrow' &amp;&amp; index === 0) {
    // Highlights last day of previous month
  }
  if (key === 'LeftArrow') /*...*/
  // ...
})
</code></pre>
<p>We need to show the previous month‚Äôs dates to highlight the last day. So the first thing to do is to click the previous month‚Äôs button.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  const previousMonthButton = datepicker.querySelector('.datepicker__previous')
  if (key === 'LeftArrow' &amp;&amp; index === 0) {
    previousMonthButton.focus()
  }
  // ...
})
</code></pre>
<p>Then, we need to find the new set of dates. Once we find the new set of dates, we can highlight the last day.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  const previousMonthButton = datepicker.querySelector('.datepicker__previous')
  if (key === 'LeftArrow' &amp;&amp; index === 0) {
    // ...
    const dates = datepicker.querySelectorAll('.datepicker__dates')
    dates[dates.length - 1].focus()
    return
  }
  // ...
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-previous-month-arrow-left.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-previous-month-arrow-left.mp4"> here </a> instead.
</video>
<h2 id="focusing-on-the-previous-week">Focusing on the previous week</h2>
<p>If the user presses Up, we want to focus on the previous week. Since one week is 7 days, we can subtract 7 from the index to find the previous week‚Äôs date.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowUp') return dates[index - 7].focus()
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-arrow-up.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-arrow-up.mp4"> here </a> instead.
</video>
<h3 id="pressing-up-on-the-first-week">Pressing Up on the first week</h3>
<p>If the index is small than 7, we know the user is on the first week of the month. In this case, we need to select the date that‚Äôs  on the last week of the previous month.</p>
<p>Let‚Äôs say the user has focus on 6 February 2019. If they press up, we want to focus on 30 January 2019.</p>
<p>First, we need to show the previous month by clicking on the previous month‚Äôs button.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowUp' &amp;&amp; index &lt; 7) {
    previousMonthButton.click()
  }
  if (key === 'ArrowUp') /*...*/
})
</code></pre>
<p>Then, we need to find the new set of dates.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowUp' &amp;&amp; index &lt; 7) {
    previousMonthButton.click()
    const dates = [...datepicker.querySelectorAll('.datepicker__date')]
  }
  if (key === 'ArrowUp') /*...*/
})
</code></pre>
<p>Then, we need to do some math to get the correct date to focus on.</p>
<ul>
<li>If <code>index</code> is 6, we want the last day of the previous month</li>
<li>If <code>index</code> is 5, we want the 2nd last day of the previous month</li>
<li>If <code>index</code> is 4, we want the 3rd last day of the previous month</li>
<li>And so on.</li>
</ul>
<p>We can do it with this calculation: <code>dates.length - (7 - index)</code>.</p>
<pre><code>datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowUp' &amp;&amp; index &lt; 7) {
    previousMonthButton.click()
    const dates = [...datepicker.querySelectorAll('.datepicker__date')]
    const date = dates[dates.length - (7 - index)]
    date.focus()
    return
  }
  // ...
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-previous-month-arrow-up.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-previous-month-arrow-up.mp4"> here </a> instead.
</video>
<h2 id="focusing-on-the-next-week">Focusing on the next week</h2>
<p>If the user presses Down, we want to focus on the next week. We can use the same 7-day calculation to get the next week‚Äôs date.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowDown') return dates[index + 7].focus()
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-arrow-down.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-arrow-down.mp4"> here </a> instead.
</video>
<h3 id="pressing-down-from-the-last-week">Pressing down from the last week</h3>
<p>If index + 7 is more than the number of days in the month, we know the user is pressing Down from the last week. In this case, we need to focus on the next week in the next month.</p>
<p>Let‚Äôs say the user presses Down from 27 February 2019. In this case, we want to focus on 6 March 2019.</p>
<p>First, we need to show the next month by clicking on the next month‚Äôs button.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  const daysInMonth = dates.length
  if (key === 'ArrowDown' &amp;&amp; index + 7 &gt; daysInMonth) {
    nextMonthButton.click()
  }
  // ...
})
</code></pre>
<p>Then, we find the new set of dates.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  const daysInMonth = dates.length
  if (key === 'ArrowDown' &amp;&amp; index + 7 &gt; daysInMonth) {
    // ...
    const dates = [...datepicker.querySelectorAll('.datepicker__date')]
  }
  // ...
})
</code></pre>
<p>We need to find the correct day of the week to focus on. The calculation is: <code>index + 7 - daysInMonth</code>.</p>
<pre><code class="language-js">datepicker.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowDown' &amp;&amp; index + 7 &gt; daysInMonth) {
    nextMonthButton.click()

    const dates = [...datepicker.querySelectorAll('.datepicker__date')]
    const date = dates[index + 7 - daysInMonth]
    date.focus()
    return
  }
  // ...
})
</code></pre>
<video muted controls autoplay loop playsinline>
  <source src="../../images/components/datepicker/keyboard/datepicker-focus-next-month-arrow-down.mp4" type="video/mp4">
  Your browser doesn't support embedded videos. Watch the video <a href="../../images/components/datepicker/keyboard/datepicker-focus-next-month-arrow-down.mp4"> here </a> instead.
</video>
<h2 id="arranging-the-if-conditions">Arranging the if conditions</h2>
<p>You can arrange the <code>if</code> conditions however you want. In this case, I think this is a good flow:</p>
<pre><code class="language-js">if (!event.shiftKey) {
  // Previous day
  if (index === 0 &amp;&amp; key === 'ArrowLeft') {/*...*/}
  if (key === 'ArrowLeft') {/*...*/}

  // Next day
  if (index === dates.length - 1 &amp;&amp; key === 'ArrowRight') {/*...*/}
  if (key === 'ArrowRight') {/*...*/}

  // Previous Week
  if (key === 'ArrowUp' &amp;&amp; index &lt; 7) {/*...*/}
  if (key === 'ArrowUp') {/*...*/}

  // Next Week
  if (key === 'ArrowDown' &amp;&amp; index + 7 &gt; dates.length) {/*...*/}
  if (key === 'ArrowDown') {/*...*/}
}

</code></pre>
<p>That‚Äôs it!</p>
<h2 id="extra-challenge">Extra challenge</h2>
<p>I have an extra challenge for you for this datepicker. Try and see if you provide these additional keyboard shortcuts:</p>
<ol>
<li>Shift + left: Select same day in previous month</li>
<li>Shift + right: Select same day next month</li>
<li>Shift + up: Select same day previous year</li>
<li>Shift + down: Select same day next year</li>
</ol>
<p>Additional notes:</p>
<ol>
<li>If focus is on 31 May, and user presses Shift + left, you need to select 30 April (because there is no 31 April).</li>
</ol>
<p>You can find the solution to the extra challenge <a href="../../components/datepicker/10.keyboard-shortcuts-extra-challenge.zip">here</a>.</p>
</article>
  </div>



  <div class="longform">
    <nav class="lesson-nav">

          <a href="../datepicker-tab-in-out/index.html" data-link-to="previous-lesson">
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M18.9 38l3.1-3.1L6.1 19 22 3.1 18.9 0 0 19z"
        ></path>
              </svg>
              <span>üõ†Ô∏è Datepicker: Tabbing in and out</span>
            </a>
          <a href="../accessibility/index.html" data-link-to="next-lesson">
              <span>What is accessibility?</span>
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M3.1 0L0 3.1 15.9 19 0 34.9 3.1 38 22 19z"
        ></path>
              </svg>
            </a>
          </nav>
  </div>
</div>
    </main>



      <script module src="../../js/main-b9439821d7.mjs"></script>
      <script nomodule src="../../js/main-legacy-8c54230a8f.js"></script>
  </body>

<!-- /datepicker-keyboard-shortcuts/  Mon, 24 Jan 2022 10:05:37 GMT -->
</html>
