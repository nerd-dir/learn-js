<!DOCTYPE html>
<html lang="en" class="no-js">

<!-- /async-await/  Mon, 24 Jan 2022 10:04:30 GMT -->
<!-- OpenDir --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /OpenDir -->
<head>
    <meta charset="UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>

<title>Asynchronous functions | Learn JavaScript</title>
<meta name="description" content="Learn JavaScript student portal"/>
<link rel="canonical" href="index.html">


<!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="../../favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicons/favicon-16x16.png">
<link rel="manifest" href="../../favicons/site.webmanifest">
<link rel="mask-icon" href="../../favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="../../favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#ffc40d">
<meta name="msapplication-config" content="../../favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- CSS -->
<link rel="stylesheet" href="../../css/styles-min-afc4baccb2.css">

<!-- Fonts -->
<script>
  (function (d) {
    var config = {
        kitId: 'gas0cwl',
        scriptTimeout: 3000,
        async: true
      },
      h = d.documentElement,
      t = setTimeout(function () {
        h.className = h
          .className
          .replace(/\bwf-loading\b/g, "") + " wf-inactive";
      }, config.scriptTimeout),
      tk = d.createElement("script"),
      f = false,
      s = d.getElementsByTagName("script")[0],
      a;
    h.className += " wf-loading";
    tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
    tk.async = true;
    tk.onload = tk.onreadystatechange = function () {
      a = this.readyState;
      if (f || a && a != "complete" && a != "loaded")
        return;
      f = true;
      clearTimeout(t);
      try {
        Typekit.load(config)
      } catch (e) {}
    };
    s
      .parentNode
      .insertBefore(tk, s)
  })(document);
</script>

<script>
  document
    .documentElement
    .classList
    .remove('no-js')
</script>

</head>

  <body class="page">
      <nav class="main-nav" data-js="menu" data-state="closed">
        <div>
          <a href="../index.html"><svg
  class="logo"
  data-size="small"
  height="1em"
  viewbox="0 0 273 43"
  xmlns="http://www.w3.org/2000/svg"
>
  <g transform="translate(-1 -10)" fill="none" fill-rule="evenodd">
    <rect fill="#F8E201" x="31" y="11" width="217" height="42" />
    <path
      d="M5.21 44.261v-5.217c0-2.726-.706-4.418-3.902-5.076v-3.76c3.196-.705 3.901-2.209 3.901-4.841v-6.11c0-4.606 2.68-8.178 8.695-8.178h1.551v3.995c-3.948 0-5.546 1.645-5.546 5.264v4.23c0 3.196-.94 6.345-4.136 7.473 3.102 1.175 4.136 4.042 4.136 7.05v4.089c0 4.183 1.598 5.828 5.546 5.828v3.995h-1.55c-5.782 0-8.696-3.243-8.696-8.742zm263.967-5.217l.141 5.217c-.141 5.499-2.961 8.742-8.789 8.742h-1.551v-3.995c3.948 0 5.499-1.645 5.499-5.828v-4.089c0-3.008 1.081-5.875 4.183-7.05-3.196-1.128-4.183-4.277-4.183-7.473v-4.23c0-3.619-1.551-5.264-5.499-5.264v-3.995h1.551c5.969 0 8.648 3.572 8.648 8.178v6.11c0 2.632.705 4.136 3.901 4.841v3.76c-3.196.658-3.901 2.35-3.901 5.076z"
      fill="#000"
      fill-rule="nonzero"
    />
    <path
      d="M29.82 52V11.5h7.74v34.56h17.46V52h-25.2zM58.2 37.78c0-8.16 3.54-16.32 13.68-16.32 8.4 0 12.18 5.1 12.18 13.62 0 .96-.06 1.92-.12 3H65.76c.06 7.44 3 9.36 6.54 9.36 2.76 0 5.52-1.2 5.52-4.2 0-.24-.06-.48-.06-.78l6 .84c.06.3.06.66.06 1.02 0 5.4-5.28 8.4-11.76 8.4-8.04 0-13.86-4.62-13.86-14.94zm13.62-11.7c-2.76 0-5.04 2.04-5.82 7.5h10.56v-1.02c0-3.48-1.38-6.48-4.74-6.48zM88.2 44.26c0-6.36 6.06-9.54 12.42-9.54 2.64 0 4.02.6 4.62.96v-4.32c0-3.42-1.32-5.1-4.44-5.1-3.66 0-4.8 2.4-3.96 5.7l-7.02-.78c-1.56-6.84 4.2-9.72 11.4-9.72 7.98 0 11.34 3.48 11.34 9.9v13.26c0 1.38.36 2.04 1.2 2.04 1.08 0 1.92-.96 1.92-.96l.42 5.22s-2.04 1.5-4.92 1.5c-2.94 0-4.98-1.5-5.46-4.62-1.56 2.94-4.56 4.92-8.46 4.92-5.16 0-9.06-3.48-9.06-8.46zm11.28 3.18c2.46 0 4.26-1.38 5.76-3.06v-5.16c-.6 0-1.38-.06-2.34-.06-4.8 0-7.44 1.44-7.44 4.62 0 2.46 1.62 3.66 4.02 3.66zM120.96 52V22.18h5.58l1.02 5.52c1.2-3.18 3.6-6.24 8.1-6.24 6.24 0 7.62 6.66 5.7 11.28l-6.3.84c.84-2.4.96-6-2.04-6-2.64 0-3.96 2.46-4.68 4.56V52h-7.38zm25.86 0V22.18h5.58l.9 4.86c2.22-3.24 4.68-5.58 9.36-5.58 5.04 0 8.88 2.82 8.88 9.18V52h-7.38V32.08c0-3.24-1.2-4.68-3.96-4.68-2.64 0-4.44 1.26-6 2.88V52h-7.38zm47.46-34.86V11.5h17.46v28.8c0 7.5-4.2 12.42-12.18 12.42-8.52 0-13.14-5.52-10.98-13.5l6.84-.72c-1.26 5.16-.06 8.4 3.96 8.4 3.06 0 4.62-1.92 4.62-5.58V17.14h-9.72zm23.94 22.62l6.9-.72c-1.08 4.26 1.2 7.98 8.1 7.98 5.46 0 7.2-2.4 7.2-5.16 0-3.66-3.3-5.04-8.04-6.66-5.76-1.98-13.44-4.38-13.44-12.84 0-7.2 5.52-11.7 14.88-11.58 11.04.12 14.94 6.42 13.74 13.32l-7.32.72c.78-5.76-1.56-8.46-6.96-8.46-4.56 0-6.54 2.04-6.54 5.04 0 4.02 3.72 5.34 8.4 6.9 6.06 1.98 13.02 4.32 13.02 12.36 0 6.84-5.1 12.06-15.24 12.06-9.48 0-16.08-4.5-14.7-12.96z"
      fill="#000"
      fill-rule="nonzero"
    />
  </g>
</svg>
</a>
          <button data-type="secondary" data-js="menu-button">Menu</button>
        </div>
        <div>
          <a href="../index.html">Contents</a>
          <a href="../../components/index.html">Components</a>
          <a href="../../community/index.html">Community</a>
          <a href="../../extras/index.html">Extras</a>
        </div>
        <div>
          <a href="../..https://nerd-dir.com">Account</a>
          <button data-type="secondary" data-js="logout">OpenDir</button>
        </div>
      </nav>

    <noscript>
      <div class="wrap">
        This portal uses JavaScript to check your identity. Please enable JavaScript to access the course.
      </div>
    </noscript>

    <main>
      <div class="wrap">
<div
  data-js="check-auth"
  data-required-authorization="mastery"
  data-auth-state="failure"
>
  <article class="longform" data-failed-content>
    <h1>Asynchronous functions</h1>
    <p>Hey <span data-js="user-data" data-field="firstName">,</p>
      <p>
      I'm thrilled to help you learn JavaScript. Unfortunately, you've landed on a page where you cannot access with your current purchase.
    </p>
      <p>
      Please upgrade (<a href="../../404/index.html" data-upgrade-link
        >use this link</a
      >) access this content.
    </p>

      <p>I'm super eager to help you learn more!</p>
    </article>

    <article class="longform" data-content>
      <h1>Asynchronous functions</h1>



      <div class="meta source-code">


      </div><p>Asynchronous functions are functions created with the <code>async</code> keyword. They let you use an <code>await</code> keyword to wait for promises to resolve. This <code>await</code> lets you write asynchronous code as if they were synchronous.</p>
<h2 id="declaring-asynchronous-functions">Declaring asynchronous functions</h2>
<p>You declare asynchronous functions with an <code>async</code> keyword. The <code>async</code> keyword must be placed before the <code>function</code> keyword.</p>
<pre><code class="language-js">// Function declaration
async function functionName (arguments) {
  // Do something asynchronous
}
</code></pre>
<p>You can also create asynchronous functions with the arrow function syntax. In this case, you write <code>async</code> before the arguments.</p>
<pre><code class="language-js">const functionName = async (arguments) =&gt; {
  // Do something asynchronous
}
</code></pre>
<h2 id="using-asynchronous-functions">Using asynchronous functions</h2>
<p>You can call asynchronous functions like normal functions. You write the name of the function, followed by parenthesis.</p>
<pre><code class="language-js">// Calling an async function
anAsyncFunction()
</code></pre>
<h2 id="asynchronous-functions-always-return-a-promise">Asynchronous functions always return a promise</h2>
<p>It doesn’t matter what you <code>return</code>. The returned value will always be a promise.</p>
<pre><code class="language-js">const getOne = async _ =&gt; {
  return 1
}

const promise = getOne()
console.log(promise) // Promise
</code></pre>
<figure>
  <img src="../../images/ajax/async/return-value.png" alt="Asynchronous functions always return a promise">
</figure>
<p>This means you can treat asynchronous functions like promises. If you return a value from an asynchronous function, you can use that value in the next <code>then</code> call.</p>
<pre><code class="language-js">const asyncSum = async (num1, num2) =&gt; num1 + num2

asyncSum(5, 10)
  .then(result =&gt; console.log(result)) // 15
</code></pre>
<h2 id="the-await-keyword">The await keyword</h2>
<p>The <code>await</code> keyword is where the magic happens. It waits for a promise to resolve before doing anything else.</p>
<p>Let’s say we send a Fetch request for a list of my repositories. This is how we write the Fetch request if we use promises.</p>
<pre><code class="language-js">fetch('https://api.github.com/users/zellwk/repos')
  .then(response =&gt; response.json())
  .then(repos =&gt; console.log(repos))
</code></pre>
<p>We can perform the same Fetch request with asynchronous functions. To do so, we first create an asynchronous function.</p>
<p>We can place the promise we wrote in the asynchronous function. It’ll work as before.</p>
<pre><code class="language-js">const fetchRepo = async link =&gt; {
  return fetch(link)
    .then(response =&gt; response.json())
    .then(repos =&gt; console.log(repos))
}

fetchRepo('https://api.github.com/users/zellwk/repos')
</code></pre>
<p>We know Fetch returns a promise. We can use <code>await</code> to wait for Fetch’s promise to resolve in an asynchronous function. We can declare a variable to hold this resolved value.</p>
<pre><code class="language-js">const fetchRepo = async link =&gt; {
  const response = await fetch(link)
  console.log(response)
}

fetchRepo('https://api.github.com/users/zellwk/repos')
</code></pre>
<p>Try logging <code>response</code> into the console. You’ll see that it’s the same <code>response</code> that is returned from a Fetch request.</p>
<figure>
  <img src="../../images/ajax/async/fetch-response.png" alt="An image of the response object">
  <figcaption>"await" waits for the promise to resolve</figcaption>
</figure>
<p>We need to call <code>response.json</code> to get the repos. Since <code>response.json</code> returns a promise, we can also use <code>await</code> to wait for this promise to resolve.</p>
<pre><code class="language-js">const fetchRepo = async link =&gt; {
  const response = await fetch(link)
  const repos = await response.json()
  console.log(repos)
}

fetchRepo('https://api.github.com/users/zellwk/repos')
</code></pre>
<p>If you log <code>repos</code>, you’ll see a list of 30 repositories.</p>
<figure>
  <img src="../../images/ajax/async/fetch-repos.png" alt="An image of the repos">
  <figcaption>"await" waits for the promise to resolve once more</figcaption>
</figure>
<h3 id="return-await">Return await</h3>
<p>There’s no need to <code>await</code> before returning a promise. You can return the promise directly.</p>
<p>If you <code>return await</code> something, you resolve the original promise first. Then, you create a new promise from the resolved value. So  <code>return await</code> effectively does nothing. No need for the extra step. We can return the promise directly.</p>
<pre><code class="language-js">const fetchRepo = async link =&gt; {
  const response = await fetch(link)
  // No need to do this
  return await response.json()
}
</code></pre>
<pre><code class="language-js">const fetchRepo = async link =&gt; {
  const response = await fetch(link)
  // Do this instead
  return response.json()
}
</code></pre>
<h2 id="handling-errors">Handling errors</h2>
<p><code>await</code> waits for the promise to resolve. It only waits for the <code>then</code> call. This means won’t handle errors in the asynchronous function we wrote.</p>
<p>Let’s see this in action. Say we <code>await</code> for a promise that always throws an error, <code>errorPromise</code>. You’ll see an “uncaught” error in your console.</p>
<pre><code class="language-js">const errorPromise = _ =&gt; {
  return new Promise((resolve, reject) =&gt; {
    reject(Error('Something went wrong!'))
  })
}

const asyncFunction = async _ =&gt; {
  const res = await errorPromise()
}

asyncFunction()
</code></pre>
<figure>
  <img src="../../images/ajax/async/error-uncaught.png" alt="An uncaught error">
  <figcaption>An uncaught error</figcaption>
</figure>
<p>We get this “uncaught” error message because we didn’t catch the error in our code. The console caught it for us, and it tells us that we need to catch the error.</p>
<p>We can use a <code>try/catch</code> block to handle errors in an asynchronous function. A <code>try/catch</code> block looks like this:</p>
<pre><code class="language-js">try {
  // Try something that may cause an error
} catch (error) {
  // Do something if an error occurs
}
</code></pre>
<p>Promises that resolve will always go into the <code>try</code> block. Promises that reject will always go into the <code>catch</code> block.</p>
<pre><code class="language-js">const asyncFunction = async _ =&gt; {
  try {
    const res = errorPromise()
    // Code continues here if successful
  } catch(error) {
    // Code goes here if something goes wrong
    console.log(error)
  }
}
</code></pre>
<figure>
  <img src="../../images/ajax/async/error-caught.png" alt="Error was caught and logged">
  <figcaption>Error was caught and logged</figcaption>
</figure>
<p>The <code>try</code> block works like this: it executes code from top to bottom, left to right (like normal). When it encounters an error, it skips the rest of the code and goes straight to the <code>catch</code> block.</p>
<pre><code class="language-js">const asyncFunction = async _ =&gt; {
  try {
    const res = await errorPromise()
    console.log('JavaScript will never read this line of code!')
  } catch(error) {
    console.log(error)
  }
}
</code></pre>
<h2 id="the-promise-catcher">The promise catcher</h2>
<p>Error handling with <code>try/catch</code> works, but it makes the code harder to digest. We don’t want to write <code>try/catch</code> blocks for every asynchronous function we write. It would be horrible!</p>
<p>For this example, imagine that <code>getOne</code>, <code>getTwo</code> and <code>getThree</code> are promises).</p>
<pre><code class="language-js">const asyncFunction = async () {
  try {
    const one = await getOne(false)
  } catch (error) {
    console.log(error)
  }

  try {
    const two = await getTwo(false)
  } catch (error) {
    console.log(error)
  }

  try {
    const three = await getThree(false)
  } catch (error) {
    console.log(error)
  }
}
</code></pre>
<p>There’s a way to make error catching easier.</p>
<p>We know asynchronous functions return promises. This means we can catch errors with a <code>catch</code> call after calling an asynchronous function. With the <code>catch</code> call in place, we no longer need to write <code>try/catch</code> blocks.</p>
<pre><code class="language-js">const asyncFunction = async _ =&gt; {
  const one = await getOne(false)
  const two = await getTwo(false)
  const three = await getThree(false)
}

asyncFunction()
  .catch(e =&gt; console.log(e)) // Error: Something went wrong!
</code></pre>
<h2 id="exercise">Exercise</h2>
<ol>
<li>Use an asynchronous function to fetch a list of your repositories</li>
<li>Handle async errors with the try/catch block</li>
<li>Handle async errors with a Promise <code>catch</code> call</li>
</ol>
</article>
  </div>



  <div class="longform">
    <nav class="lesson-nav">

          <a href="../request-many-resources/index.html" data-link-to="previous-lesson">
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M18.9 38l3.1-3.1L6.1 19 22 3.1 18.9 0 0 19z"
        ></path>
              </svg>
              <span>Requesting many resources at once</span>
            </a>
          <a href="../multiple-await/index.html" data-link-to="next-lesson">
              <span>Handling multiple awaits</span>
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M3.1 0L0 3.1 15.9 19 0 34.9 3.1 38 22 19z"
        ></path>
              </svg>
            </a>
          </nav>
  </div>
</div>
    </main>



      <script module src="../../js/main-b9439821d7.mjs"></script>
      <script nomodule src="../../js/main-legacy-8c54230a8f.js"></script>
  </body>

<!-- /async-await/  Mon, 24 Jan 2022 10:04:31 GMT -->
</html>
