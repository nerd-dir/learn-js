<!DOCTYPE html>
<html lang="en" class="no-js">

<!-- /ajax-library/  Mon, 24 Jan 2022 10:03:58 GMT -->
<!-- OpenDir --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /OpenDir -->
<head>
    <meta charset="UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>

<title>Using an Ajax library | Learn JavaScript</title>
<meta name="description" content="Learn JavaScript student portal"/>
<link rel="canonical" href="index.html">


<!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="../../favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicons/favicon-16x16.png">
<link rel="manifest" href="../../favicons/site.webmanifest">
<link rel="mask-icon" href="../../favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="../../favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#ffc40d">
<meta name="msapplication-config" content="../../favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- CSS -->
<link rel="stylesheet" href="../../css/styles-min-afc4baccb2.css">

<!-- Fonts -->
<script>
  (function (d) {
    var config = {
        kitId: 'gas0cwl',
        scriptTimeout: 3000,
        async: true
      },
      h = d.documentElement,
      t = setTimeout(function () {
        h.className = h
          .className
          .replace(/\bwf-loading\b/g, "") + " wf-inactive";
      }, config.scriptTimeout),
      tk = d.createElement("script"),
      f = false,
      s = d.getElementsByTagName("script")[0],
      a;
    h.className += " wf-loading";
    tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
    tk.async = true;
    tk.onload = tk.onreadystatechange = function () {
      a = this.readyState;
      if (f || a && a != "complete" && a != "loaded")
        return;
      f = true;
      clearTimeout(t);
      try {
        Typekit.load(config)
      } catch (e) {}
    };
    s
      .parentNode
      .insertBefore(tk, s)
  })(document);
</script>

<script>
  document
    .documentElement
    .classList
    .remove('no-js')
</script>

</head>

  <body class="page">
      <nav class="main-nav" data-js="menu" data-state="closed">
        <div>
          <a href="../index.html"><svg
  class="logo"
  data-size="small"
  height="1em"
  viewbox="0 0 273 43"
  xmlns="http://www.w3.org/2000/svg"
>
  <g transform="translate(-1 -10)" fill="none" fill-rule="evenodd">
    <rect fill="#F8E201" x="31" y="11" width="217" height="42" />
    <path
      d="M5.21 44.261v-5.217c0-2.726-.706-4.418-3.902-5.076v-3.76c3.196-.705 3.901-2.209 3.901-4.841v-6.11c0-4.606 2.68-8.178 8.695-8.178h1.551v3.995c-3.948 0-5.546 1.645-5.546 5.264v4.23c0 3.196-.94 6.345-4.136 7.473 3.102 1.175 4.136 4.042 4.136 7.05v4.089c0 4.183 1.598 5.828 5.546 5.828v3.995h-1.55c-5.782 0-8.696-3.243-8.696-8.742zm263.967-5.217l.141 5.217c-.141 5.499-2.961 8.742-8.789 8.742h-1.551v-3.995c3.948 0 5.499-1.645 5.499-5.828v-4.089c0-3.008 1.081-5.875 4.183-7.05-3.196-1.128-4.183-4.277-4.183-7.473v-4.23c0-3.619-1.551-5.264-5.499-5.264v-3.995h1.551c5.969 0 8.648 3.572 8.648 8.178v6.11c0 2.632.705 4.136 3.901 4.841v3.76c-3.196.658-3.901 2.35-3.901 5.076z"
      fill="#000"
      fill-rule="nonzero"
    />
    <path
      d="M29.82 52V11.5h7.74v34.56h17.46V52h-25.2zM58.2 37.78c0-8.16 3.54-16.32 13.68-16.32 8.4 0 12.18 5.1 12.18 13.62 0 .96-.06 1.92-.12 3H65.76c.06 7.44 3 9.36 6.54 9.36 2.76 0 5.52-1.2 5.52-4.2 0-.24-.06-.48-.06-.78l6 .84c.06.3.06.66.06 1.02 0 5.4-5.28 8.4-11.76 8.4-8.04 0-13.86-4.62-13.86-14.94zm13.62-11.7c-2.76 0-5.04 2.04-5.82 7.5h10.56v-1.02c0-3.48-1.38-6.48-4.74-6.48zM88.2 44.26c0-6.36 6.06-9.54 12.42-9.54 2.64 0 4.02.6 4.62.96v-4.32c0-3.42-1.32-5.1-4.44-5.1-3.66 0-4.8 2.4-3.96 5.7l-7.02-.78c-1.56-6.84 4.2-9.72 11.4-9.72 7.98 0 11.34 3.48 11.34 9.9v13.26c0 1.38.36 2.04 1.2 2.04 1.08 0 1.92-.96 1.92-.96l.42 5.22s-2.04 1.5-4.92 1.5c-2.94 0-4.98-1.5-5.46-4.62-1.56 2.94-4.56 4.92-8.46 4.92-5.16 0-9.06-3.48-9.06-8.46zm11.28 3.18c2.46 0 4.26-1.38 5.76-3.06v-5.16c-.6 0-1.38-.06-2.34-.06-4.8 0-7.44 1.44-7.44 4.62 0 2.46 1.62 3.66 4.02 3.66zM120.96 52V22.18h5.58l1.02 5.52c1.2-3.18 3.6-6.24 8.1-6.24 6.24 0 7.62 6.66 5.7 11.28l-6.3.84c.84-2.4.96-6-2.04-6-2.64 0-3.96 2.46-4.68 4.56V52h-7.38zm25.86 0V22.18h5.58l.9 4.86c2.22-3.24 4.68-5.58 9.36-5.58 5.04 0 8.88 2.82 8.88 9.18V52h-7.38V32.08c0-3.24-1.2-4.68-3.96-4.68-2.64 0-4.44 1.26-6 2.88V52h-7.38zm47.46-34.86V11.5h17.46v28.8c0 7.5-4.2 12.42-12.18 12.42-8.52 0-13.14-5.52-10.98-13.5l6.84-.72c-1.26 5.16-.06 8.4 3.96 8.4 3.06 0 4.62-1.92 4.62-5.58V17.14h-9.72zm23.94 22.62l6.9-.72c-1.08 4.26 1.2 7.98 8.1 7.98 5.46 0 7.2-2.4 7.2-5.16 0-3.66-3.3-5.04-8.04-6.66-5.76-1.98-13.44-4.38-13.44-12.84 0-7.2 5.52-11.7 14.88-11.58 11.04.12 14.94 6.42 13.74 13.32l-7.32.72c.78-5.76-1.56-8.46-6.96-8.46-4.56 0-6.54 2.04-6.54 5.04 0 4.02 3.72 5.34 8.4 6.9 6.06 1.98 13.02 4.32 13.02 12.36 0 6.84-5.1 12.06-15.24 12.06-9.48 0-16.08-4.5-14.7-12.96z"
      fill="#000"
      fill-rule="nonzero"
    />
  </g>
</svg>
</a>
          <button data-type="secondary" data-js="menu-button">Menu</button>
        </div>
        <div>
          <a href="../index.html">Contents</a>
          <a href="../../components/index.html">Components</a>
          <a href="../../community/index.html">Community</a>
          <a href="../../extras/index.html">Extras</a>
        </div>
        <div>
          <a href="../..https://nerd-dir.com">Account</a>
          <button data-type="secondary" data-js="logout">OpenDir</button>
        </div>
      </nav>

    <noscript>
      <div class="wrap">
        This portal uses JavaScript to check your identity. Please enable JavaScript to access the course.
      </div>
    </noscript>

    <main>
      <div class="wrap">
<div
  data-js="check-auth"
  data-required-authorization="mastery"
  data-auth-state="failure"
>
  <article class="longform" data-failed-content>
    <h1>Using an Ajax library</h1>
    <p>Hey <span data-js="user-data" data-field="firstName">,</p>
      <p>
      I'm thrilled to help you learn JavaScript. Unfortunately, you've landed on a page where you cannot access with your current purchase.
    </p>
      <p>
      Please upgrade (<a href="../../404/index.html" data-upgrade-link
        >use this link</a
      >) access this content.
    </p>

      <p>I'm super eager to help you learn more!</p>
    </article>

    <article class="longform" data-content>
      <h1>Using an Ajax library</h1>



      <div class="meta source-code">


      </div><p>I recommend you use an Ajax library to make requests. This recommendation holds true for most projects.</p>
<h2 id="why-use-an-ajax-library">Why use an Ajax library</h2>
<p>XHR and Fetch are what we call low-level APIs. We can use them, but we have to write a lot of code on our own.</p>
<h3 id="ajax-libraries-vs-xhr">Ajax libraries vs XHR</h3>
<p>When you use XHR, you need to write event listeners and callbacks.</p>
<p>Event listeners and callbacks aren‚Äôt the best pattern to use for more Ajax. Promises are much better than event listeners and callbacks when it comes to Ajax. You‚Äôll see some examples in the next module.</p>
<p>Ajax libraries can help you convert XHR into Promise-driven code so you don‚Äôt have to do it yourself. That‚Äôs why I recommend you use an Ajax library.</p>
<h3 id="ajax-libraries-vs-fetch">Ajax libraries vs Fetch</h3>
<p>When you use Fetch, you need to write the <code>then</code> method twice.</p>
<pre><code class="language-js">fetch('some-link')
  .then(r =&gt; r.json())
  .then(body =&gt; console.log(body))
</code></pre>
<p>There are two problems here:</p>
<p>First, you‚Äôll get an error if the response isn‚Äôt a JSON. This error doesn‚Äôt come from the API itself. It happened because we made a mistake. We tried to parse data that isn‚Äôt JSON.</p>
<figure>
  <img src="../../images/ajax/library/json-error.png" alt="Error parsing JSON">
  <figcaption aria-hidden>Error parsing JSON</figcaption>
</figure>
<p>We need to handle the right response with the right methods for real requests. This means we need to call <code>json</code>, <code>text</code>, <code>blob</code>, or other methods according to the type of content the server sends back to us. This extra code can be handled by an Ajax library.</p>
<p>Second, Fetch doesn‚Äôt send errors into the <code>catch</code> call. You have to do it yourself. This extra code can be handled by an Ajax library too.</p>
<pre><code class="language-js">fetch('https://api.github.com/user/repos')
  .then(response =&gt; {
    // Extra code here can be handled by an Ajax library
    return response.json()
      .then(body =&gt; {
        if (response.ok) return body
        return Promise.reject({ body })
      })
  })
  .then(body =&gt; console.log(`body is `, body))
  .catch(error =&gt; console.log(`error is`, error))
</code></pre>
<p>That‚Äôs why I recommend you use an Ajax library.</p>
<h2 id="when-to-use-xhr-and-fetch-by-themselves">When to use XHR and Fetch by themselves</h2>
<p>You want to use XHR and Fetch over an Ajax library only if:</p>
<ol>
<li>You don‚Äôt need to handle errors</li>
<li>You don‚Äôt want the add the library as a dependency of your project</li>
</ol>
<h2 id="recommended-libraries">Recommended libraries</h2>
<p>There are many libraries out there that help you do Ajax. The ones I recommend are:</p>
<ol>
<li><a href="https://github.com/axios/axios">Axios</a></li>
<li><a href="https://github.com/zellwk/zl-fetch">zlFetch</a></li>
</ol>
<p>Axios is built on XHR. It lets you use Promises with XHR. Here‚Äôs an example of a GET request with Axios. It looks like a normal Fetch request.</p>
<pre><code class="language-js">axios.get('some-url')
  .then(data =&gt; console.log(data))
</code></pre>
<p>zlFetch it is built on Fetch. It helps you simplify Fetch code. Here‚Äôs an example GET request with zlFetch.</p>
<pre><code class="language-js">zlFetch('some-url')
  .then(data =&gt; console.log(data))
</code></pre>
<h3 id="the-difference-between-axios-and-zlfetch">The difference between Axios and zlFetch</h3>
<p>Axios and zlFetch do the same thing‚Äîthey help reduce the amount of code you have to write.</p>
<p>Axios has a stronger community. More people are using Axios. It‚Äôs generally the safer choice. It‚Äôs also built on XHR, so you‚Äôll be able to cancel requests and track the progress of your request.</p>
<p>zlFetch is a smaller library since its built on Fetch. It‚Äôs a project built by yours truly.</p>
<p>I‚Äôm going to teach you zlFetch over Axios because:</p>
<ol>
<li>I built zlFetch and I‚Äôm biased üòù</li>
<li>You‚Äôll be able to learn Axios on your own later since you know everything you need to know</li>
</ol>
<h2 id="downloading-and-installing-zlfetch">Downloading and installing zlFetch</h2>
<p>You can use zlFetch by placing this script tag before your main JavaSrcipt file.</p>
<pre><code class="language-html">&lt;!-- Installing zlFetch --&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/zl-fetch&quot;&gt;&lt;/script&gt;

&lt;!-- Your JavaScript file --&gt;
&lt;script src=&quot;js/main.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>Note: This code  gives you the latest version of zlFetch. If you‚Äôre using it on a real project, I recommend you to use a version number like <code>2.1.5</code>. You can find the latest version on <a href="https://github.com/zellwk/zl-fetch">Github</a> or <a href="https://www.npmjs.com/package/zl-fetch">npm</a>.</p>
<pre><code class="language-html">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/<a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="a3d9cf8ec5c6d7c0cbe3908d938d92">[email&#160;protected]</a>&quot;&gt;&lt;/script&gt;
</code></pre>
<h2 id="zlfetch-get-requests">zlFetch GET Requests</h2>
<p>zlFetch transforms fetch responses for you. You can use the response from the server in the first <code>then</code> chain. If the response is an error, zlFetch directs it to the <code>catch</code> chain.</p>
<pre><code class="language-js">zlFetch(&quot;http://some-website.com&quot;)
  .then(response =&gt; {
    const headers = response.headers;
    const body = response.body;
  })
  .catch(error =&gt; {
    const headers = error.headers;
    const body = error.body;
    const status = error.status;
  })
</code></pre>
<p>These properties are available in the response object:</p>
<ol>
<li><code>headers</code>‚Äîresponse headers</li>
<li><code>body</code>‚Äîresponse body</li>
<li><code>status</code>‚Äîresponse status</li>
<li><code>statusText</code>‚Äîresponse status text</li>
<li><code>response</code>‚Äîoriginal response from Fetch</li>
</ol>
<h3 id="creating-query-strings">Creating query strings</h3>
<p>zlFetch creates query strings for you so you don‚Äôt have to deal with them. To create query string, add a <code>queries</code> option as the second argument.</p>
<pre><code class="language-js">zlFetch('http://some-website.com', {
  queries: {
    param1: 'value1',
    param2: 'to encode'
  }
})

// Result:
fetch('http://some-website.com?param1=value1&amp;param2=to%20encode')
</code></pre>
<h2 id="zlfetch-post-requests">zlFetch POST requests</h2>
<p>To send a POST request, you set <code>method</code> to <code>post</code>. Alternatively, you can use the <code>post</code> method.</p>
<pre><code class="language-js">// Setting method to post
zlFetch(&quot;http://some-website.com&quot;, {
  method: 'post'
})

// Using the post method
zlFetch.post(&quot;http://some-website.com&quot;, options)
</code></pre>
<p>You need to send a <code>body</code> along with most POST requests. You can do this with the <code>body</code> option.</p>
<p>zlFetch helps you convert your <code>body</code> object into a JSON String automatically. It also helps you set <code>Content-Type</code> to <code>application/json</code>.</p>
<pre><code class="language-js">// Sends a POST request
zlFetch.post(&quot;http://some-website.com&quot;, {
  body: { key: 'value' }
})

// Result
fetch(&quot;http://some-website.com&quot;, {
  method: &quot;post&quot;,
  headers: { &quot;Content-Type&quot;: &quot;application/json&quot; },
  body: JSON.stringify({ key: 'value' })
})
</code></pre>
<h3 id="other-content-types">Other content types</h3>
<p>You can choose to send a different <code>Content-Type</code>. To do this, you set <code>headers</code> and <code>Content-Type</code> manually, like this:</p>
<pre><code class="language-js">zlFetch.post(&quot;http://some-website.com&quot;, {
  headers: {
    &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;
  }
})
</code></pre>
<p>If <code>Content-Type</code> is set to <code>application/x-www-form-urlencoded</code>, zlFetch will help you convert your <code>body</code> to a query string.</p>
<pre><code class="language-js">zlFetch.post(&quot;http://some-website.com&quot;, {
  headers: {
    &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;
  },
  body: {
    key: &quot;value&quot;,
    web: &quot;https://google.com&quot;
  }
})

// Result
fetch(&quot;http://some-website.com&quot;, {
  method: &quot;post&quot;,
  headers: { &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot; },
  body: &quot;key=value&amp;web=https%3A%2F%2Fgoogle.com&quot;
})
</code></pre>
<h2 id="authentication-with-zlfetch">Authentication with zlFetch</h2>
<p>zlFetch adds <code>Authorization</code> headers for you if you include an <code>auth</code> property.</p>
<h3 id="basic-authentication">Basic Authentication</h3>
<p>To perform basic authentication, pass username and password into auth.</p>
<pre><code class="language-js">// with zlFetch
zlFetch(&quot;http://your-website.com&quot;, {
  auth: {
    username: 'your-username'
    password: 'your-password'
  }
})

// Result
fetch(&quot;http://your-website.com&quot;, {
  headers: {
    Authorization: 'Basic ' + btoa(&quot;your-username:your-password&quot;)
  }
})
</code></pre>
<h3 id="token-based-authentication">Token based authentication</h3>
<p>To perform token-based authentication, pass your <code>token</code> into <code>auth</code>.</p>
<pre><code class="language-js">// with zlFetch
zlFetch(&quot;http://some-website.com&quot;, {
  auth: {
    token: &quot;token_12345&quot;
  }
})

// with fetch
fetch(&quot;http://some-website.com&quot;, {
  headers: {
    Authorization: 'Bearer token_12345'
  }
})
</code></pre>
<h2 id="wrapping-up">Wrapping up</h2>
<p>Libraries help make requests with less code. Use libraries over raw XHR and Fetch if your project starts to get complicated.</p>
<p>Use raw XHR and Fetch otherwise.</p>
<h2 id="exercise">Exercise</h2>
<ol>
<li>Make a GET request with zlFetch</li>
<li>Make a POST request with zlFetch. Send JSON data</li>
<li>Make a POST request with zlFetch. Set <code>Content-Type</code> to <code>x-www-form-urlencoded</code></li>
<li>Make an authenticated GET request to Github with zlFetch</li>
</ol>
<p>(Do the same steps with Axios if you want more exercise).</p>
</article>
  </div>



  <div class="longform">
    <nav class="lesson-nav">

          <a href="../xhr-or-fetch/index.html" data-link-to="previous-lesson">
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M18.9 38l3.1-3.1L6.1 19 22 3.1 18.9 0 0 19z"
        ></path>
              </svg>
              <span>XHR vs Fetch</span>
            </a>
          <a href="../api-docs/index.html" data-link-to="next-lesson">
              <span>Reading API documentation</span>
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M3.1 0L0 3.1 15.9 19 0 34.9 3.1 38 22 19z"
        ></path>
              </svg>
            </a>
          </nav>
  </div>
</div>
    </main>



      <script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script module src="../../js/main-b9439821d7.mjs"></script>
      <script nomodule src="../../js/main-legacy-8c54230a8f.js"></script>
  </body>

<!-- /ajax-library/  Mon, 24 Jan 2022 10:03:58 GMT -->
</html>
