<!DOCTYPE html>
<html lang="en" class="no-js">

<!-- /carousel-automatic-dots/  Mon, 24 Jan 2022 10:02:43 GMT -->
<!-- OpenDir --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /OpenDir -->
<head>
    <meta charset="UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>

<title>🛠 Carousel: Creating dots with JavaScript | Learn JavaScript</title>
<meta name="description" content="Learn JavaScript student portal"/>
<link rel="canonical" href="index.html">


<!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="../../favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicons/favicon-16x16.png">
<link rel="manifest" href="../../favicons/site.webmanifest">
<link rel="mask-icon" href="../../favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="../../favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#ffc40d">
<meta name="msapplication-config" content="../../favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- CSS -->
<link rel="stylesheet" href="../../css/styles-min-afc4baccb2.css">

<!-- Fonts -->
<script>
  (function (d) {
    var config = {
        kitId: 'gas0cwl',
        scriptTimeout: 3000,
        async: true
      },
      h = d.documentElement,
      t = setTimeout(function () {
        h.className = h
          .className
          .replace(/\bwf-loading\b/g, "") + " wf-inactive";
      }, config.scriptTimeout),
      tk = d.createElement("script"),
      f = false,
      s = d.getElementsByTagName("script")[0],
      a;
    h.className += " wf-loading";
    tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
    tk.async = true;
    tk.onload = tk.onreadystatechange = function () {
      a = this.readyState;
      if (f || a && a != "complete" && a != "loaded")
        return;
      f = true;
      clearTimeout(t);
      try {
        Typekit.load(config)
      } catch (e) {}
    };
    s
      .parentNode
      .insertBefore(tk, s)
  })(document);
</script>

<script>
  document
    .documentElement
    .classList
    .remove('no-js')
</script>

</head>

  <body class="page">
      <nav class="main-nav" data-js="menu" data-state="closed">
        <div>
          <a href="../index.html"><svg
  class="logo"
  data-size="small"
  height="1em"
  viewbox="0 0 273 43"
  xmlns="http://www.w3.org/2000/svg"
>
  <g transform="translate(-1 -10)" fill="none" fill-rule="evenodd">
    <rect fill="#F8E201" x="31" y="11" width="217" height="42" />
    <path
      d="M5.21 44.261v-5.217c0-2.726-.706-4.418-3.902-5.076v-3.76c3.196-.705 3.901-2.209 3.901-4.841v-6.11c0-4.606 2.68-8.178 8.695-8.178h1.551v3.995c-3.948 0-5.546 1.645-5.546 5.264v4.23c0 3.196-.94 6.345-4.136 7.473 3.102 1.175 4.136 4.042 4.136 7.05v4.089c0 4.183 1.598 5.828 5.546 5.828v3.995h-1.55c-5.782 0-8.696-3.243-8.696-8.742zm263.967-5.217l.141 5.217c-.141 5.499-2.961 8.742-8.789 8.742h-1.551v-3.995c3.948 0 5.499-1.645 5.499-5.828v-4.089c0-3.008 1.081-5.875 4.183-7.05-3.196-1.128-4.183-4.277-4.183-7.473v-4.23c0-3.619-1.551-5.264-5.499-5.264v-3.995h1.551c5.969 0 8.648 3.572 8.648 8.178v6.11c0 2.632.705 4.136 3.901 4.841v3.76c-3.196.658-3.901 2.35-3.901 5.076z"
      fill="#000"
      fill-rule="nonzero"
    />
    <path
      d="M29.82 52V11.5h7.74v34.56h17.46V52h-25.2zM58.2 37.78c0-8.16 3.54-16.32 13.68-16.32 8.4 0 12.18 5.1 12.18 13.62 0 .96-.06 1.92-.12 3H65.76c.06 7.44 3 9.36 6.54 9.36 2.76 0 5.52-1.2 5.52-4.2 0-.24-.06-.48-.06-.78l6 .84c.06.3.06.66.06 1.02 0 5.4-5.28 8.4-11.76 8.4-8.04 0-13.86-4.62-13.86-14.94zm13.62-11.7c-2.76 0-5.04 2.04-5.82 7.5h10.56v-1.02c0-3.48-1.38-6.48-4.74-6.48zM88.2 44.26c0-6.36 6.06-9.54 12.42-9.54 2.64 0 4.02.6 4.62.96v-4.32c0-3.42-1.32-5.1-4.44-5.1-3.66 0-4.8 2.4-3.96 5.7l-7.02-.78c-1.56-6.84 4.2-9.72 11.4-9.72 7.98 0 11.34 3.48 11.34 9.9v13.26c0 1.38.36 2.04 1.2 2.04 1.08 0 1.92-.96 1.92-.96l.42 5.22s-2.04 1.5-4.92 1.5c-2.94 0-4.98-1.5-5.46-4.62-1.56 2.94-4.56 4.92-8.46 4.92-5.16 0-9.06-3.48-9.06-8.46zm11.28 3.18c2.46 0 4.26-1.38 5.76-3.06v-5.16c-.6 0-1.38-.06-2.34-.06-4.8 0-7.44 1.44-7.44 4.62 0 2.46 1.62 3.66 4.02 3.66zM120.96 52V22.18h5.58l1.02 5.52c1.2-3.18 3.6-6.24 8.1-6.24 6.24 0 7.62 6.66 5.7 11.28l-6.3.84c.84-2.4.96-6-2.04-6-2.64 0-3.96 2.46-4.68 4.56V52h-7.38zm25.86 0V22.18h5.58l.9 4.86c2.22-3.24 4.68-5.58 9.36-5.58 5.04 0 8.88 2.82 8.88 9.18V52h-7.38V32.08c0-3.24-1.2-4.68-3.96-4.68-2.64 0-4.44 1.26-6 2.88V52h-7.38zm47.46-34.86V11.5h17.46v28.8c0 7.5-4.2 12.42-12.18 12.42-8.52 0-13.14-5.52-10.98-13.5l6.84-.72c-1.26 5.16-.06 8.4 3.96 8.4 3.06 0 4.62-1.92 4.62-5.58V17.14h-9.72zm23.94 22.62l6.9-.72c-1.08 4.26 1.2 7.98 8.1 7.98 5.46 0 7.2-2.4 7.2-5.16 0-3.66-3.3-5.04-8.04-6.66-5.76-1.98-13.44-4.38-13.44-12.84 0-7.2 5.52-11.7 14.88-11.58 11.04.12 14.94 6.42 13.74 13.32l-7.32.72c.78-5.76-1.56-8.46-6.96-8.46-4.56 0-6.54 2.04-6.54 5.04 0 4.02 3.72 5.34 8.4 6.9 6.06 1.98 13.02 4.32 13.02 12.36 0 6.84-5.1 12.06-15.24 12.06-9.48 0-16.08-4.5-14.7-12.96z"
      fill="#000"
      fill-rule="nonzero"
    />
  </g>
</svg>
</a>
          <button data-type="secondary" data-js="menu-button">Menu</button>
        </div>
        <div>
          <a href="../index.html">Contents</a>
          <a href="../../components/index.html">Components</a>
          <a href="../../community/index.html">Community</a>
          <a href="../../extras/index.html">Extras</a>
        </div>
        <div>
          <a href="../..https://nerd-dir.com">Account</a>
          <button data-type="secondary" data-js="logout">OpenDir</button>
        </div>
      </nav>

    <noscript>
      <div class="wrap">
        This portal uses JavaScript to check your identity. Please enable JavaScript to access the course.
      </div>
    </noscript>

    <main>
      <div class="wrap">
<div
  data-js="check-auth"
  data-required-authorization="mastery"
  data-auth-state="failure"
>
  <article class="longform" data-failed-content>
    <h1>🛠 Carousel: Creating dots with JavaScript</h1>
    <p>Hey <span data-js="user-data" data-field="firstName">,</p>
      <p>
      I'm thrilled to help you learn JavaScript. Unfortunately, you've landed on a page where you cannot access with your current purchase.
    </p>
      <p>
      Please upgrade (<a href="../../404/index.html" data-upgrade-link
        >use this link</a
      >) access this content.
    </p>

      <p>I'm super eager to help you learn more!</p>
    </article>

    <article class="longform" data-content>
      <h1>🛠 Carousel: Creating dots with JavaScript</h1>



      <div class="meta source-code">


    <a href="../../download/components/carousel/13.automatic-dots.zip">
      <svg class="icon" viewBox="0 0 20 20" height="1em">
        <path fill="currentColor" d="M.7 9.3l4.8-4.8 1.4 1.42L2.84 10l4.07 4.07-1.41 1.42L0 10l.7-.7zm18.6 1.4l.7-.7-5.49-5.49-1.4 1.42L17.16 10l-4.07 4.07 1.41 1.42 4.78-4.78z"/>
      </svg>
      <span>Source</span>
    </a>
      </div><p>When we created dots for the carousel, we wrote them manually in the HTML. Here’s what we wrote:</p>
<pre><code class="language-html">&lt;div class=&quot;carousel__dots&quot;&gt;
  &lt;button class=&quot;carousel__dot is-selected&quot;&gt;&lt;/button&gt;
  &lt;button class=&quot;carousel__dot&quot;&gt;&lt;/button&gt;
  &lt;button class=&quot;carousel__dot&quot;&gt;&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<p>Since the number of dots is the same as the number of slides, we can create dots automatically with JavaScript. This lets us keep the number of dots and slides consistent without manual effort.</p>
<h2 id="removing-old-code">Removing old code</h2>
<p>First, we’ll remove dots from the HTML and JavaScript.</p>
<pre><code class="language-html">&lt;!-- Remove these --&gt;
&lt;div class=&quot;carousel__dots&quot;&gt;
  &lt;button class=&quot;carousel__dot is-selected&quot;&gt;&lt;/button&gt;
  &lt;button class=&quot;carousel__dot&quot;&gt;&lt;/button&gt;
  &lt;button class=&quot;carousel__dot&quot;&gt;&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<pre><code class="language-js">// And remove these
const dotsContainer = carousel.querySelector('.carousel__dots')
const dots = [...carousel.querySelectorAll('.carousel__dot')]
</code></pre>
<p>You may need to comment out parts of the code that require <code>dotsContainer</code> and <code>dots</code> before we create the dots with JavaScript. (I’ll leave you to comment out the necessary code on your own).</p>
<h2 id="creating-the-dots">Creating the dots</h2>
<p>First, we’ll make a function called <code>createDots</code>.</p>
<pre><code class="language-js">const createDots = _ =&gt; {
  // ...
}
</code></pre>
<p>This function should create the following HTML.</p>
<pre><code class="language-html">&lt;div class=&quot;carousel__dots&quot;&gt;
  &lt;button class=&quot;carousel__dot is-selected&quot;&gt;&lt;/button&gt;
  &lt;button class=&quot;carousel__dot&quot;&gt;&lt;/button&gt;
  &lt;button class=&quot;carousel__dot&quot;&gt;&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<p>To make this HTML, we need to use <code>createElement</code> to create the wrapping <code>&lt;div&gt;</code>. We also use <code>classList.add</code> to add the <code>carousel__dots</code> class.</p>
<pre><code class="language-js">const createDots = _ =&gt; {
  const dotsContainer = document.createElement('div')
  dotsContainer.classList.add('carousel__dots')
}
</code></pre>
<p>To make the three <code>&lt;button&gt;</code> elements, we loop through <code>slides</code>. This lets us create one dot for each slide.</p>
<pre><code class="language-js">const createDots = _ =&gt;  {
  // ...
  slides.forEach(slide =&gt; {
    const dot = document.createElement('button')
    dot.classList.add('carousel__dot')
  })
}
</code></pre>
<p>Then, we append each dot into <code>dotsContainer</code>.</p>
<pre><code class="language-js">const createDots = _ =&gt;  {
  // ...
  slides.forEach(slide =&gt; {
    const dot = document.createElement('button')
    dot.classList.add('carousel__dot')
    dotsContainer.appendChild(dot)
  })
}
</code></pre>
<p>If you log <code>dotsContainer</code>, you should see three <code>&lt;button&gt;</code> elements.</p>
<figure role="figure"><img src="../../images/components/carousel/automatic-dots/dots.png" alt="HTML Structure created with JavaScript."></figure>
<h3 id="adding-the-is-selected-class">Adding the is-selected class</h3>
<p>The first slide has the <code>is-selected</code> class, so the first dot should also have the <code>is-selected</code> class.</p>
<p>We can add the <code>is-selected</code> class in two ways:</p>
<ol>
<li>Use the index. If index is 0, we know it’s the first dot.</li>
<li>Check if the slide contains <code>is-selected</code>. If <code>slide</code> contains the <code>is-selected</code> class, we know it’s the selected slide.</li>
</ol>
<p>Both methods work, but the second one is more robust. It allows you to start the carousel on the second slide. (I’ll leave you to figure this one out if you’re interested. 😉 Hint: You need to write code to position <code>.carousel__contents</code> on the starting slide).</p>
<pre><code class="language-js">const createDots = _ =&gt;  {
  // ...
  slides.forEach(slide =&gt; {
    const dot = document.createElement('button')
    dot.classList.add('carousel__dot')

    if (slide.classList.contains('is-selected')) {
      dot.classList.add('is-selected')
    }

    dotsContainer.appendChild(dot)
  })
}
</code></pre>
<figure role="figure"><img src="../../images/components/carousel/automatic-dots/dots-2.png" alt="Created HTML. First dot contains is-selected class."></figure>
<p>Finally, we return <code>dotsContainer</code> from <code>createDots</code>. This lets us use <code>dotsContainer</code> anywhere we need to.</p>
<pre><code class="language-js">const createDots = _ =&gt;  {
  // ...
  return dotsContainer
}
</code></pre>
<h2 id="using-createdots">Using createDots</h2>
<p>We need to use createDots to create the dots.</p>
<pre><code class="language-js">const dotsContainer = createDots()
</code></pre>
<p>But remember, <code>createDots</code> used the <code>slides</code> variable. We need to make sure <code>slides</code> is available before we call <code>createDots</code>. This means we need to use <code>createDots</code> like this:</p>
<pre><code class="language-js">// Declare the slides variable
const slides = [...carousel.querySelectorAll('.carousel__slide')]

// Declare the createDots function
const createDots = _ =&gt; { /* ... */}

// Declare the dotsContainer variable using createDots
const dotsContainer = createDots()
</code></pre>
<p>After creating <code>dotsContainer</code>, we need to create the <code>dots</code> variable for use in other parts of our code. We also need to append <code>dotsContainer</code> into the DOM.</p>
<pre><code class="language-js">const dotsContainer = createDots()
const dots = [...dotsContainer.children]

// Adds dots into the DOM
carousel.appendChild(dotsContainer)

// Listen to dotsContainer
dotsContainer.addEventListener('click', event =&gt; {
  // ...
})
</code></pre>
<h2 id="cleaning-up">Cleaning up</h2>
<p>If you followed the steps so far, you’ll have a section of code that looks like this:</p>
<pre><code class="language-js">// Declaring variables
const carousel = document.querySelector('.carousel')
const previousButton = carousel.querySelector('.previous-button')
const nextButton = carousel.querySelector('.next-button')
const contents = carousel.querySelector('.carousel__contents')
const slides = [...carousel.querySelectorAll('.carousel__slide')]

// Declaring a function
const createDots = _ =&gt; { ... }

// Declaring more variables
const dotsContainer = createDots()
const dots = [...dotsContainer.children]

// Declaring more functions
// ...
</code></pre>
<p>This variable -&gt; function -&gt; variable -&gt; function order is not pretty. We get confused and slightly overwhelmed because there are too many things to keep track of.</p>
<p>Ideally, we want to put all variables in a block and all functions in another block to keep things simple:</p>
<pre><code class="language-js">// Variables
// ...

// Functions
// ...
</code></pre>
<p>We cannot pull <code>createDots</code> down into other functions because <code>dotsContainer</code> needs to use <code>createDots</code>. What we can do is bring <code>createDots</code> above the other variables:</p>
<pre><code class="language-js">// Declaring a function
const createDots = _ =&gt; { ... }

// Declaring all variables
const carousel = document.querySelector('.carousel')
const previousButton = carousel.querySelector('.previous-button')
const nextButton = carousel.querySelector('.next-button')
const contents = carousel.querySelector('.carousel__contents')
const slides = [...carousel.querySelectorAll('.carousel__slide')]

// Declaring more variables
const dotsContainer = createDots()
const dots = [...dotsContainer.children]

// Declaring other functions
</code></pre>
<p>There’s a slight problem if we do this.</p>
<h2 id="external-variables-and-lexical-scope">External variables and lexical scope</h2>
<p>For most of our functions, we declared variables before using them. Here’s an example:</p>
<pre><code class="language-js">const nextButton = carousel.querySelector('.next-button')

const switchSlide = (currentSlideIndex, targetSlideIndex) =&gt; {/* ... */}
const getCurrentSlideIndex = _ =&gt; {/* ... */}


nextButton.addEventListener('click', event =&gt; {
  const currentSlideIndex = getCurrentSlideIndex()
  const nextSlideIndex = currentSlideIndex + 1

  switchSlide(currentSlideIndex, nextSlideIndex)
  // ...
})
</code></pre>
<ol>
<li>We created <code>nextButton</code> before using <code>addEventListener</code>.</li>
<li>We created <code>getCurrentSlideIndex</code> before using in the event listener.</li>
<li>We created <code>currentSlideIndex</code> before we found <code>nextSlideIndex</code>.</li>
<li>We created <code>switchSlide</code>, <code>currentSlideIndex</code>, and <code>nextSlideIndex</code> before using it.</li>
</ol>
<p>Our code flows in a top-down format. Everything is declared before we use it.</p>
<p>But for <code>createDots</code>, this is not the case.</p>
<pre><code class="language-js">const createDots = _ =&gt; {
  const dotsContainer = document.createElement('div')
  dotsContainer.classList.add('carousel__dots')

  slides.forEach(slide =&gt; {
    const dot = document.createElement('button')
    dot.classList.add('carousel__dot')

    if (slide.classList.contains('is-selected')) {
      dot.classList.add('is-selected')
    }

    dotsContainer.appendChild(dot)
  })
}

const slides = [...carousel.querySelectorAll('.carousel__slide')]
const dotsContainer = createDots()
</code></pre>
<ol>
<li>We created <code>createDots</code> first.</li>
<li><code>createDots</code> require <code>slides</code>.</li>
<li>But <code>slides</code> cannot be found within <code>createDots</code>. It cannot be found above <code>createDots</code> either.</li>
<li>We created <code>slides</code> after <code>createDots</code>.</li>
</ol>
<p>In this case, <code>createDots</code> still work because <code>slides</code> was declared before we used <code>createDots</code>. We say <code>slides</code> is in the <strong>lexical scope</strong>.</p>
<p>If we flipped the <code>slides</code> and <code>dotsContainer</code> code around, <code>createDots</code> won’t work anymore.</p>
<pre><code class="language-js">// This wouldn't work.
const dotsContainer = createDots()
const slides = [...carousel.querySelectorAll('.carousel__slide')]
</code></pre>
<p>Code can be quite fragile (especially in functions) if you use external variables. To fix this “flipping of order” thing, we can pass <code>slides</code> into <code>createDots</code>.</p>
<pre><code class="language-js">const createDots = slides =&gt; {/* ... */}

const slides = [...carousel.querySelectorAll('.carousel__slide')]
const dotsContainer = createDots(slides)
</code></pre>
<p>This way, we know <code>dotsContainer</code> must come after <code>slides</code>. There’s no mistake to order we declare these two variables.</p>
<h3 id="we%E2%80%99ve-been-relying-on-external-variables">We’ve been relying on external variables</h3>
<p>We’ve been relying on external variables (and hence lexical scope) for every function we created for the carousel.</p>
<p>If you pay attention, you can see <code>slides</code> and <code>dots</code> variables used in functions. Here’s an example. In <code>switchSlide</code>, we used <code>contents</code> even though <code>contents</code> is not declared within <code>switchSlide</code>.</p>
<pre><code class="language-js">const switchSlide = (currentSlideIndex, targetSlideIndex) =&gt; {
  const currentSlide = slides[currentSlideIndex]
  const targetSlide = slides[targetSlideIndex]
  const destination = getComputedStyle(targetSlide).left

  contents.style.transform = `translateX(-${destination})`
  currentSlide.classList.remove('is-selected')
  targetSlide.classList.add('is-selected')
}
</code></pre>
<p>Here’s another example. In <code>highlightDot</code>, we used <code>dots</code> even though <code>dots</code> is not declared in <code>highlightDot</code>.</p>
<pre><code class="language-js">const highlightDot = (currentSlideIndex, targetSlideIndex) =&gt; {
  const currentDot = dots[currentSlideIndex]
  const targetDot = dots[targetSlideIndex]
  currentDot.classList.remove('is-selected')
  targetDot.classList.add('is-selected')
}
</code></pre>
<p>What we’ve done is ok! We don’t need to worry about these external variables because <strong>we know they are declared upfront</strong>. We won’t mistake the order we use the variables.</p>
<h2 id="hoisting">Hoisting</h2>
<p>Since we brought <code>createDots</code> to the top of our JavaScript file, you can say we hoisted <code>createDots</code> manually.</p>
<p>We can hoist <code>createDots</code> automatically if we use a normal function instead of an arrow function. If we do this, we can keep all variables in one place and all functions in one place.</p>
<pre><code class="language-js">// Declaring all variables
// ...
const slides = [...carousel.querySelectorAll('.carousel__slide')]
const dotsContainer = createDots()
const dots = [...dotsContainer.children]

// Declaring all functions
function createDots(slides) {/* ... */}
// ...
</code></pre>
<p>Whether you do this is up to you.</p>
<p>That’s it!</p>
<p>(Bonus: You can also create <code>previousButton</code> and <code>nextButton</code> with JavaScript too. Try it! 😃).</p>
</article>
  </div>



  <div class="longform">
    <nav class="lesson-nav">

          <a href="../remove-elements/index.html" data-link-to="previous-lesson">
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M18.9 38l3.1-3.1L6.1 19 22 3.1 18.9 0 0 19z"
        ></path>
              </svg>
              <span>Removing Elements from the DOM</span>
            </a>
          <a href="../calculator-html-css/index.html" data-link-to="next-lesson">
              <span>🛠️ Calculator: HTML and CSS</span>
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M3.1 0L0 3.1 15.9 19 0 34.9 3.1 38 22 19z"
        ></path>
              </svg>
            </a>
          </nav>
  </div>
</div>
    </main>



      <script module src="../../js/main-b9439821d7.mjs"></script>
      <script nomodule src="../../js/main-legacy-8c54230a8f.js"></script>
  </body>

<!-- /carousel-automatic-dots/  Mon, 24 Jan 2022 10:02:44 GMT -->
</html>
