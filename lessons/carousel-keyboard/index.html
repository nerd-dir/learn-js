<!DOCTYPE html>
<html lang="en" class="no-js">

<!-- /carousel-keyboard/  Mon, 24 Jan 2022 10:05:17 GMT -->
<!-- OpenDir --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /OpenDir -->
<head>
    <meta charset="UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>

<title>üõ†Ô∏è Carousel: Adding keyboard interaction | Learn JavaScript</title>
<meta name="description" content="Learn JavaScript student portal"/>
<link rel="canonical" href="index.html">


<!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="../../favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicons/favicon-16x16.png">
<link rel="manifest" href="../../favicons/site.webmanifest">
<link rel="mask-icon" href="../../favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="../../favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#ffc40d">
<meta name="msapplication-config" content="../../favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- CSS -->
<link rel="stylesheet" href="../../css/styles-min-afc4baccb2.css">

<!-- Fonts -->
<script>
  (function (d) {
    var config = {
        kitId: 'gas0cwl',
        scriptTimeout: 3000,
        async: true
      },
      h = d.documentElement,
      t = setTimeout(function () {
        h.className = h
          .className
          .replace(/\bwf-loading\b/g, "") + " wf-inactive";
      }, config.scriptTimeout),
      tk = d.createElement("script"),
      f = false,
      s = d.getElementsByTagName("script")[0],
      a;
    h.className += " wf-loading";
    tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
    tk.async = true;
    tk.onload = tk.onreadystatechange = function () {
      a = this.readyState;
      if (f || a && a != "complete" && a != "loaded")
        return;
      f = true;
      clearTimeout(t);
      try {
        Typekit.load(config)
      } catch (e) {}
    };
    s
      .parentNode
      .insertBefore(tk, s)
  })(document);
</script>

<script>
  document
    .documentElement
    .classList
    .remove('no-js')
</script>

</head>

  <body class="page">
      <nav class="main-nav" data-js="menu" data-state="closed">
        <div>
          <a href="../index.html"><svg
  class="logo"
  data-size="small"
  height="1em"
  viewbox="0 0 273 43"
  xmlns="http://www.w3.org/2000/svg"
>
  <g transform="translate(-1 -10)" fill="none" fill-rule="evenodd">
    <rect fill="#F8E201" x="31" y="11" width="217" height="42" />
    <path
      d="M5.21 44.261v-5.217c0-2.726-.706-4.418-3.902-5.076v-3.76c3.196-.705 3.901-2.209 3.901-4.841v-6.11c0-4.606 2.68-8.178 8.695-8.178h1.551v3.995c-3.948 0-5.546 1.645-5.546 5.264v4.23c0 3.196-.94 6.345-4.136 7.473 3.102 1.175 4.136 4.042 4.136 7.05v4.089c0 4.183 1.598 5.828 5.546 5.828v3.995h-1.55c-5.782 0-8.696-3.243-8.696-8.742zm263.967-5.217l.141 5.217c-.141 5.499-2.961 8.742-8.789 8.742h-1.551v-3.995c3.948 0 5.499-1.645 5.499-5.828v-4.089c0-3.008 1.081-5.875 4.183-7.05-3.196-1.128-4.183-4.277-4.183-7.473v-4.23c0-3.619-1.551-5.264-5.499-5.264v-3.995h1.551c5.969 0 8.648 3.572 8.648 8.178v6.11c0 2.632.705 4.136 3.901 4.841v3.76c-3.196.658-3.901 2.35-3.901 5.076z"
      fill="#000"
      fill-rule="nonzero"
    />
    <path
      d="M29.82 52V11.5h7.74v34.56h17.46V52h-25.2zM58.2 37.78c0-8.16 3.54-16.32 13.68-16.32 8.4 0 12.18 5.1 12.18 13.62 0 .96-.06 1.92-.12 3H65.76c.06 7.44 3 9.36 6.54 9.36 2.76 0 5.52-1.2 5.52-4.2 0-.24-.06-.48-.06-.78l6 .84c.06.3.06.66.06 1.02 0 5.4-5.28 8.4-11.76 8.4-8.04 0-13.86-4.62-13.86-14.94zm13.62-11.7c-2.76 0-5.04 2.04-5.82 7.5h10.56v-1.02c0-3.48-1.38-6.48-4.74-6.48zM88.2 44.26c0-6.36 6.06-9.54 12.42-9.54 2.64 0 4.02.6 4.62.96v-4.32c0-3.42-1.32-5.1-4.44-5.1-3.66 0-4.8 2.4-3.96 5.7l-7.02-.78c-1.56-6.84 4.2-9.72 11.4-9.72 7.98 0 11.34 3.48 11.34 9.9v13.26c0 1.38.36 2.04 1.2 2.04 1.08 0 1.92-.96 1.92-.96l.42 5.22s-2.04 1.5-4.92 1.5c-2.94 0-4.98-1.5-5.46-4.62-1.56 2.94-4.56 4.92-8.46 4.92-5.16 0-9.06-3.48-9.06-8.46zm11.28 3.18c2.46 0 4.26-1.38 5.76-3.06v-5.16c-.6 0-1.38-.06-2.34-.06-4.8 0-7.44 1.44-7.44 4.62 0 2.46 1.62 3.66 4.02 3.66zM120.96 52V22.18h5.58l1.02 5.52c1.2-3.18 3.6-6.24 8.1-6.24 6.24 0 7.62 6.66 5.7 11.28l-6.3.84c.84-2.4.96-6-2.04-6-2.64 0-3.96 2.46-4.68 4.56V52h-7.38zm25.86 0V22.18h5.58l.9 4.86c2.22-3.24 4.68-5.58 9.36-5.58 5.04 0 8.88 2.82 8.88 9.18V52h-7.38V32.08c0-3.24-1.2-4.68-3.96-4.68-2.64 0-4.44 1.26-6 2.88V52h-7.38zm47.46-34.86V11.5h17.46v28.8c0 7.5-4.2 12.42-12.18 12.42-8.52 0-13.14-5.52-10.98-13.5l6.84-.72c-1.26 5.16-.06 8.4 3.96 8.4 3.06 0 4.62-1.92 4.62-5.58V17.14h-9.72zm23.94 22.62l6.9-.72c-1.08 4.26 1.2 7.98 8.1 7.98 5.46 0 7.2-2.4 7.2-5.16 0-3.66-3.3-5.04-8.04-6.66-5.76-1.98-13.44-4.38-13.44-12.84 0-7.2 5.52-11.7 14.88-11.58 11.04.12 14.94 6.42 13.74 13.32l-7.32.72c.78-5.76-1.56-8.46-6.96-8.46-4.56 0-6.54 2.04-6.54 5.04 0 4.02 3.72 5.34 8.4 6.9 6.06 1.98 13.02 4.32 13.02 12.36 0 6.84-5.1 12.06-15.24 12.06-9.48 0-16.08-4.5-14.7-12.96z"
      fill="#000"
      fill-rule="nonzero"
    />
  </g>
</svg>
</a>
          <button data-type="secondary" data-js="menu-button">Menu</button>
        </div>
        <div>
          <a href="../index.html">Contents</a>
          <a href="../../components/index.html">Components</a>
          <a href="../../community/index.html">Community</a>
          <a href="../../extras/index.html">Extras</a>
        </div>
        <div>
          <a href="../..https://nerd-dir.com">Account</a>
          <button data-type="secondary" data-js="logout">OpenDir</button>
        </div>
      </nav>

    <noscript>
      <div class="wrap">
        This portal uses JavaScript to check your identity. Please enable JavaScript to access the course.
      </div>
    </noscript>

    <main>
      <div class="wrap">
<div
  data-js="check-auth"
  data-required-authorization="mastery"
  data-auth-state="failure"
>
  <article class="longform" data-failed-content>
    <h1>üõ†Ô∏è Carousel: Adding keyboard interaction</h1>
    <p>Hey <span data-js="user-data" data-field="firstName">,</p>
      <p>
      I'm thrilled to help you learn JavaScript. Unfortunately, you've landed on a page where you cannot access with your current purchase.
    </p>
      <p>
      Please upgrade (<a href="../../404/index.html" data-upgrade-link
        >use this link</a
      >) access this content.
    </p>

      <p>I'm super eager to help you learn more!</p>
    </article>

    <article class="longform" data-content>
      <h1>üõ†Ô∏è Carousel: Adding keyboard interaction</h1>



      <div class="meta source-code">


    <a href="../../download/components/carousel/14.keyboard.zip">
      <svg class="icon" viewBox="0 0 20 20" height="1em">
        <path fill="currentColor" d="M.7 9.3l4.8-4.8 1.4 1.42L2.84 10l4.07 4.07-1.41 1.42L0 10l.7-.7zm18.6 1.4l.7-.7-5.49-5.49-1.4 1.42L17.16 10l-4.07 4.07 1.41 1.42 4.78-4.78z"/>
      </svg>
      <span>Source</span>
    </a>
      </div><p>Users can Tab through every element of the carousel. By this definition, our carousel is already keyboard accessible.</p>
<figure role="figure"><img src="../../images/components/carousel/keyboard/tab-through.gif" alt="Tabbing through all elements."></figure>
<p>Even though users can Tab through a carousel, they won‚Äôt know it unless they see a focus style.</p>
<h2 id="showing-a-focus-style">Showing a focus style</h2>
<p>Each slide has a focus style. We don‚Äôt see the focus because the focus got hidden by <code>overflow: hidden</code>.</p>
<pre><code class="language-css">/* This is the culprit */
.carousel__contents-container {
  overflow: hidden;
}
</code></pre>
<p>We can see the focus if we removed <code>overflow: hidden</code> from <code>.carousel__contents-container</code>.</p>
<figure role="figure"><img src="../../images/components/carousel/keyboard/remove-hidden.gif" alt="Removed overflow hidden property to show the default focus style."></figure>
<p>However, we cannot remove <code>overflow: hidden</code> from <code>.carousel__contents-container</code>. That‚Äôs the property we used to hide other slides. We need <code>overflow: hidden</code> to remain.</p>
<p>We need another way to show focus on each slide. There are two choices:</p>
<ol>
<li>Use an inset box shadow on each focused slide</li>
<li>Add a box shadow to <code>.carousel__contents-container</code> when children elements get focus</li>
</ol>
<p>Both methods work. We‚Äôll go with the second one because the focus looks way better when we change slides.</p>
<p>We can detect when children element gets focus with <code>:focus-within</code>. We‚Äôll use this pseudo-class to display the focus.</p>
<pre><code class="language-css">.carousel__contents-container:focus-within {
  box-shadow: 0 0 0 0.5rem lightskyblue;
}
</code></pre>
<figure role="figure"><img src="../../images/components/carousel/keyboard/modified-focus-style.gif" alt="Modified focus style."></figure>
<h2 id="moving-past-the-carousel">Moving past the carousel</h2>
<p>Imagine using a website with this carousel. You need to get past the carousel with a keyboard. To get past the carousel, you need to hit <code>Tab</code> 9 times.</p>
<p>This is a frustrating experience. (And the frustration increases with the number of slides).</p>
<figure role="figure" aria-label="It takes 9 tabs to get through a carousel with 3 slides"><img src="../../images/components/carousel/keyboard/tab-through-2.gif" alt=""><figcaption>It takes 9 tabs to get through a carousel with 3 slides</figcaption></figure>
<p>The best way to allow users to move past the carousel is to remove the ability to Tab through all slides, buttons, and dots. If we do this, users can get through the carousel in 2 Tabs.</p>
<figure role="figure"><img src="../../images/components/carousel/keyboard/two-tabs.gif" alt="Allows the user to tab through the carousel in 2 tabs."></figure>
<p>To do this, we have to set <code>tabindex</code> to <code>-1</code> for the previous and next buttons.</p>
<pre><code class="language-html">&lt;section class=&quot;carousel&quot;&gt;
  &lt;button class=&quot;carousel__button previous-button&quot; hidden tabindex=&quot;-1&quot;&gt; ...&lt;/button&gt;
  &lt;div class=&quot;carousel__contents-container&quot;&gt; ... &lt;/div&gt;
  &lt;button class=&quot;carousel__button next-button&quot; tabindex=&quot;-1&quot;&gt; ... &lt;/button&gt;
&lt;/section&gt;
</code></pre>
<p>We also need to set <code>tabindex</code> for slides to <code>-1</code>.</p>
<p>But since we want users to Tab into the current slide, we will NOT add <code>tabindex=&quot;-1&quot;</code> to the current slide.</p>
<pre><code class="language-html">&lt;ul class=&quot;carousel__contents&quot;&gt;
  &lt;li class=&quot;carousel__slide is-selected&quot;&gt;
    &lt;a href=&quot;#&quot;&gt; ... &lt;/a&gt;
  &lt;/li&gt;
  &lt;li class=&quot;carousel__slide&quot;&gt;
    &lt;a href=&quot;#&quot; tabindex=&quot;-1&quot;&gt; ... &lt;/a&gt;
  &lt;/li&gt;
  &lt;li class=&quot;carousel__slide&quot;&gt;
    &lt;a href=&quot;#&quot; tabindex=&quot;-1&quot;&gt; ... &lt;/a&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>Finally, we set <code>tabindex</code> for each <code>dot</code> to <code>-1</code>.</p>
<pre><code class="language-js">function createDots (slides) {
  // ...
  slides.forEach(slide =&gt; {
    const dot = document.createElement('button')
    dot.classList.add('carousel__dot')
    dot.setAttribute('tabindex', -1)
    // ...
  })
  // ...
}
</code></pre>
<h2 id="switching-slides-with-arrow-keys">Switching slides with arrow keys</h2>
<p>We destroyed keyboard accessibility when we prevent users from Tabbing into the slides. We need to provide users an alternate way to access the slides.</p>
<p>The best way is to let them <strong>switch slides with arrow keys</strong>. They can:</p>
<ol>
<li>Go to the next slide with <code>‚Üí</code></li>
<li>Go to the previous slide with <code>‚Üê</code></li>
</ol>
<p>First, we need to listen for arrow keys.</p>
<p>The best way to listen for arrow keys normally is to add the event listeners on focusable elements (the <code>&lt;a&gt;</code> tags for the carousel).</p>
<pre><code class="language-js">slides.forEach(slide =&gt; {
  const a = slide.querySelector('a')
  a.addEventListener('keydown', event =&gt; {
    console.log(event.key)
  })
})
</code></pre>
<p>But, in this case, we can use the event delegation pattern on a parent element like <code>.carousel__contents</code>.</p>
<p>We can do this because each <code>&lt;a&gt;</code> tag covers the same area as <code>.carousel__contents</code>. Users will not be able to click on a space between <code>&lt;a&gt;</code> and <code>.carousel__contents</code>.</p>
<pre><code class="language-js">contents.addEventListener('keydown', event =&gt; {
  // ...
})
</code></pre>
<p>We want to switch slides if the user presses the Left or Right arrow keys. The simplest way to do this is:</p>
<ol>
<li>Click <code>nextButton</code> if user presses <code>‚Üí</code></li>
<li>Click <code>previousButton</code> if user presses <code>‚Üê</code></li>
</ol>
<pre><code class="language-js">contents.addEventListener('keydown', event =&gt; {
  const { key } = event
  if (key === 'ArrowLeft') previousButton.click()
  if (key === 'ArrowRight') nextButton.click()
})
</code></pre>
<figure role="figure"><img src="../../images/components/carousel/keyboard/switch-with-arrows.gif" alt="Switching slides with arrow keys."></figure>
<h2 id="focusing-on-the-correct-slide">Focusing on the correct slide</h2>
<p>Users should be able to interact with each slide. If they press Enter when the second slide is shown, they should navigate to the link the second slide points to.</p>
<p>Let‚Äôs add real links to each slide to test this out.</p>
<pre><code class="language-html">&lt;ul class=&quot;carousel__contents&quot;&gt;
  &lt;li class=&quot;carousel__slide is-selected&quot;&gt;
    &lt;a href=&quot;https://en.wikipedia.org/wiki/1&quot;&gt; ... &lt;/a&gt;
  &lt;/li&gt;
  &lt;li class=&quot;carousel__slide&quot;&gt;
    &lt;a href=&quot;https://simple.wikipedia.org/wiki/Universe&quot; ...tabindex=&quot;-1&quot;&gt; ... &lt;/a&gt;
  &lt;/li&gt;
  &lt;li class=&quot;carousel__slide&quot;&gt;
    &lt;a href=&quot;https://learnjavascript.today&quot; tabindex=&quot;-1&quot;&gt; ... &lt;/a&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</code></pre>
<p>Try going to the third slide with <code>‚Üí</code>. Press <code>Enter</code> when you get to the third slide. You‚Äôll notice you get directed to the first slide‚Äôs link.</p>
<p>This is wrong. You should get directed to the third slide‚Äôs link.</p>
<figure role="figure"><img src="../../images/components/carousel/keyboard/link.gif" alt="Carousels always link to the first slide"></figure>
<p>This happens because we only changed the slides visually. Focus still remains on the first slide‚Äôs <code>&lt;a&gt;</code> element.</p>
<p>For keyboard accessibility to work properly, we need to focus on the correct slide‚Äôs <code>&lt;a&gt;</code> too.</p>
<pre><code class="language-js">nextButton.addEventListener('click', event =&gt; {
  // ...
  // Focus on selected slide's anchor tag
  const link = slides[nextSlideIndex].querySelector('a')
  link.focus()
})
</code></pre>
<p>Unfortunately, the carousel breaks after adding the <code>focus</code> method.</p>
<p>Try clicking the right button (or hitting <code>‚Üí</code>  once). You should see the second slide. But you‚Äôll see the third slide.</p>
<figure role="figure"><img src="../../images/components/carousel/keyboard/bug.gif" alt=""></figure>
<p>This happens because the <code>focus</code> method forces the browser to scroll to the focused element (both vertically and horizontally).</p>
<p>We can prevent automatic scrolling by setting <code>preventScroll</code> to <code>true</code>.</p>
<pre><code class="language-js">nextButton.addEventListener('click', event =&gt; {
  // ...
  // Focus on selected slide's anchor tag
  const link = slides[nextSlideIndex].querySelector('a')
  link.focus({ preventScroll: true })
})
</code></pre>
<figure role="figure"><img src="../../images/components/carousel/keyboard/fixed-bug.gif" alt="Carousel fixed. Hitting Enter on a slide goes to the correct page too."></figure>
<p>Remember to add the focus code to <code>previousButton</code>'s and <code>dotsContainer</code>'s event listeners as well.</p>
<pre><code class="language-js">previousButton.addEventListener('click', event =&gt; {
  // ...
  // Focus on selected slide's anchor tag
  const link = slides[previousSlideIndex].querySelector('a')
  link.focus({ preventScroll: true })
})
</code></pre>
<pre><code class="language-js">dotsContainer.addEventListener('click', event =&gt; {
  // ...
  // Focus on selected slide's anchor tag
  const link = slides[targetSlideIndex].querySelector('a')
  link.focus({ preventScroll: true })
})
</code></pre>
<p>Unfortunately, <code>preventScroll</code> is not supported on Safari and Edge yet.</p>
<figure role="figure"><img src="../../images/components/carousel/keyboard/prevent-scroll-support.png" alt="preventScroll is not supported on Safari and Edge."></figure>
<p>We need a fallback.</p>
<h3 id="fallback-for-preventscroll">Fallback for preventScroll</h3>
<p>When the browsers scrolls to the focused element, they‚Äôll scroll the nearest scrollable ancestor element. In this case, the scrollable element is <code>.contents__track-container</code>.</p>
<p>You can detect the scroll by adding a <code>transitionend</code> event listener.</p>
<pre><code class="language-js">window.addEventListener('transitionend', event =&gt; {
  console.log(contents.parentElement.scrollLeft)
})
</code></pre>
<figure role="figure"><img src="../../images/components/carousel/keyboard/scroll.gif" alt="Logs the scrolled amount in the console."></figure>
<p>We want to prevent this scrolling behavior from happening. To do this, we need to set <code>.contents__track-container</code> scroll back to 0 before the transition happens.</p>
<p>We need to use a <code>setTimeout</code> callback to do this.</p>
<pre><code class="language-js">nextButton.addEventListener('click', event =&gt; {
  // ...

  const link = slides[nextSlideIndex].querySelector('a')
  link.focus({ preventScroll: true })

  // Fallback for preventScroll
  setTimeout(() =&gt; {
    contents.parentElement.scrollLeft = 0
  }, 0)
})

// Repeat fallback for previousButton and dotContainer event listeners
</code></pre>
<p>Safari and Edge should work fine now.</p>
<figure role="figure"><img src="../../images/components/carousel/keyboard/fixed-bug.gif" alt="Fallback for preventScroll works on Safari."></figure>
<h2 id="subsequent-focus">Subsequent focus</h2>
<p>Let‚Äôs say a user Tabs out of the carousel from the second slide. A while later, the Tab back into the carousel. When they do this, we want focus to be on the second slide.</p>
<p>We can do this by swapping the <code>tabindex</code> values when we change slides.</p>
<pre><code class="language-js">nextButton.addEventListener('click', event =&gt; {
  // ...
  // Focus on selected slide's anchor tag
  const nextLink = slides[nextSlideIndex].querySelector('a')
  nextLink.focus({ preventScroll: true })

  // Fallback for preventSrroll
  setTimeout(() =&gt; {
    contents.parentElement.scrollLeft = 0
  }, 0)

  // Roving tabindex
  const currentLink = slides[currentSlideIndex].querySelector('a')
  currentLink.setAttribute('tabindex', '-1')
  nextLink.removeAttribute('tabindex')
})
</code></pre>
<pre><code class="language-js">previousButton.addEventListener('click', event =&gt; {
  // ...
  // Focus on selected slide's anchor tag
  const previousLink = slides[previousSlideIndex].querySelector('a')
  previousLink.focus({ preventScroll: true })

  // Fallback for preventSrroll
  setTimeout(() =&gt; {
    contents.parentElement.scrollLeft = 0
  }, 0)

  // Roving tabindex
  const currentLink = slides[currentSlideIndex].querySelector('a')
  currentLink.setAttribute('tabindex', '-1')
  previousLink.removeAttribute('tabindex')
})
</code></pre>
<pre><code class="language-js">dotsContainer.addEventListener('click', event =&gt; {
  // ...
  // Focus on selected slide's anchor tag
  const targetLink = slides[targetSlideIndex].querySelector('a')
  targetLink.focus({preventScroll: true})

  // Fallback for preventSrroll
  setTimeout(() =&gt; {
    contents.parentElement.scrollLeft = 0
  }, 0)

  // Roving tabindex
  const currentLink = slides[currentSlideIndex].querySelector('a')
  currentLink.setAttribute('tabindex', '-1')
  targetLink.removeAttribute('tabindex')
})
</code></pre>
<h2 id="refactoring">Refactoring</h2>
<p>We did these 5 things in <code>nextButton</code>'s, <code>previousButton</code>'s, and <code>dotContainer</code>'s event listeners:</p>
<ol>
<li>Switch to the correct slide</li>
<li>Highlight dot</li>
<li>Show/hide arrow buttons</li>
<li>Focus on the slide‚Äôs link</li>
<li>Corrected each slide‚Äôs <code>tabindex</code> attribute</li>
</ol>
<p>Since we need to do all five things each time we switch a slide, we might as well group them into <code>switchSlide</code>.</p>
<pre><code class="language-js">const switchSlide = (currentSlideIndex, targetSlideIndex) =&gt; {
  const currentSlide = slides[currentSlideIndex]
  const targetSlide = slides[targetSlideIndex]

  // Switches to the correct slide
  const destination = getComputedStyle(targetSlide).left
  contents.style.transform = `translateX(-${destination})`
  currentSlide.classList.remove('is-selected')
  targetSlide.classList.add('is-selected')

  // Highlights the correct dot
  const currentDot = dots[currentSlideIndex]
  const targetDot = dots[targetSlideIndex]
  currentDot.classList.remove('is-selected')
  targetDot.classList.add('is-selected')

  // Show/hide arrow buttons accordingly
  if (targetSlideIndex === 0) {
    previousButton.setAttribute('hidden', true)
    nextButton.removeAttribute('hidden')
  } else if (targetSlideIndex === dots.length - 1) {
    previousButton.removeAttribute('hidden')
    nextButton.setAttribute('hidden', true)
  } else {
    previousButton.removeAttribute('hidden')
    nextButton.removeAttribute('hidden')
  }

  // Focus on selected slide's anchor tag
  const currentLink = slides[currentSlideIndex].querySelector('a')
  const targetLink = slides[targetSlideIndex].querySelector('a')
  targetLink.focus({ preventScroll: true })

  // Fallback for preventScroll
  setTimeout(() =&gt; {
    contents.parentElement.scrollLeft = 0
  }, 0)

  // Roving tabindex
  currentLink.setAttribute('tabindex', '-1')
  targetLink.removeAttribute('tabindex')
}
</code></pre>
<p>If we do this, we can simplify our event listeners use only <code>switchSlide</code>.</p>
<pre><code class="language-js">nextButton.addEventListener('click', event =&gt; {
  const currentSlideIndex = getCurrentSlideIndex()
  const nextSlideIndex = currentSlideIndex + 1
  switchSlide(currentSlideIndex, nextSlideIndex)
})
</code></pre>
<pre><code class="language-js">previousButton.addEventListener('click', event =&gt; {
  const currentSlideIndex = getCurrentSlideIndex()
  const previousSlideIndex = currentSlideIndex - 1
  switchSlide(currentSlideIndex, previousSlideIndex)
})
</code></pre>
<pre><code class="language-js">dotsContainer.addEventListener('click', event =&gt; {
  const dot = event.target.closest('button')
  if (!dot) return

  const currentSlideIndex = getCurrentSlideIndex()
  const targetSlideIndex = dots.findIndex(d =&gt; d === dot)
  switchSlide(currentSlideIndex, targetSlideIndex)
})
</code></pre>
<p>We can also delete <code>highlightDot</code> and <code>showHideArrowButtons</code>.</p>
<p>That‚Äôs it!</p>
</article>
  </div>



  <div class="longform">
    <nav class="lesson-nav">

          <a href="../tabby-keyboard-refactor/index.html" data-link-to="previous-lesson">
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M18.9 38l3.1-3.1L6.1 19 22 3.1 18.9 0 0 19z"
        ></path>
              </svg>
              <span>üõ†Ô∏è Tabby: Refactoring</span>
            </a>
          <a href="../carousel-keyboard-help-text/index.html" data-link-to="next-lesson">
              <span>üõ†Ô∏è Carousel: Displaying help text</span>
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M3.1 0L0 3.1 15.9 19 0 34.9 3.1 38 22 19z"
        ></path>
              </svg>
            </a>
          </nav>
  </div>
</div>
    </main>



      <script module src="../../js/main-b9439821d7.mjs"></script>
      <script nomodule src="../../js/main-legacy-8c54230a8f.js"></script>
  </body>

<!-- /carousel-keyboard/  Mon, 24 Jan 2022 10:05:20 GMT -->
</html>
