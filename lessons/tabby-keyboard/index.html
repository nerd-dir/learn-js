<!DOCTYPE html>
<html lang="en" class="no-js">

<!-- /tabby-keyboard/  Mon, 24 Jan 2022 10:05:14 GMT -->
<!-- OpenDir --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /OpenDir -->
<head>
    <meta charset="UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>

<title>üõ†Ô∏è Tabby: Adding keyboard interaction | Learn JavaScript</title>
<meta name="description" content="Learn JavaScript student portal"/>
<link rel="canonical" href="index.html">


<!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="../../favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicons/favicon-16x16.png">
<link rel="manifest" href="../../favicons/site.webmanifest">
<link rel="mask-icon" href="../../favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="../../favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#ffc40d">
<meta name="msapplication-config" content="../../favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- CSS -->
<link rel="stylesheet" href="../../css/styles-min-afc4baccb2.css">

<!-- Fonts -->
<script>
  (function (d) {
    var config = {
        kitId: 'gas0cwl',
        scriptTimeout: 3000,
        async: true
      },
      h = d.documentElement,
      t = setTimeout(function () {
        h.className = h
          .className
          .replace(/\bwf-loading\b/g, "") + " wf-inactive";
      }, config.scriptTimeout),
      tk = d.createElement("script"),
      f = false,
      s = d.getElementsByTagName("script")[0],
      a;
    h.className += " wf-loading";
    tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
    tk.async = true;
    tk.onload = tk.onreadystatechange = function () {
      a = this.readyState;
      if (f || a && a != "complete" && a != "loaded")
        return;
      f = true;
      clearTimeout(t);
      try {
        Typekit.load(config)
      } catch (e) {}
    };
    s
      .parentNode
      .insertBefore(tk, s)
  })(document);
</script>

<script>
  document
    .documentElement
    .classList
    .remove('no-js')
</script>

</head>

  <body class="page">
      <nav class="main-nav" data-js="menu" data-state="closed">
        <div>
          <a href="../index.html"><svg
  class="logo"
  data-size="small"
  height="1em"
  viewbox="0 0 273 43"
  xmlns="http://www.w3.org/2000/svg"
>
  <g transform="translate(-1 -10)" fill="none" fill-rule="evenodd">
    <rect fill="#F8E201" x="31" y="11" width="217" height="42" />
    <path
      d="M5.21 44.261v-5.217c0-2.726-.706-4.418-3.902-5.076v-3.76c3.196-.705 3.901-2.209 3.901-4.841v-6.11c0-4.606 2.68-8.178 8.695-8.178h1.551v3.995c-3.948 0-5.546 1.645-5.546 5.264v4.23c0 3.196-.94 6.345-4.136 7.473 3.102 1.175 4.136 4.042 4.136 7.05v4.089c0 4.183 1.598 5.828 5.546 5.828v3.995h-1.55c-5.782 0-8.696-3.243-8.696-8.742zm263.967-5.217l.141 5.217c-.141 5.499-2.961 8.742-8.789 8.742h-1.551v-3.995c3.948 0 5.499-1.645 5.499-5.828v-4.089c0-3.008 1.081-5.875 4.183-7.05-3.196-1.128-4.183-4.277-4.183-7.473v-4.23c0-3.619-1.551-5.264-5.499-5.264v-3.995h1.551c5.969 0 8.648 3.572 8.648 8.178v6.11c0 2.632.705 4.136 3.901 4.841v3.76c-3.196.658-3.901 2.35-3.901 5.076z"
      fill="#000"
      fill-rule="nonzero"
    />
    <path
      d="M29.82 52V11.5h7.74v34.56h17.46V52h-25.2zM58.2 37.78c0-8.16 3.54-16.32 13.68-16.32 8.4 0 12.18 5.1 12.18 13.62 0 .96-.06 1.92-.12 3H65.76c.06 7.44 3 9.36 6.54 9.36 2.76 0 5.52-1.2 5.52-4.2 0-.24-.06-.48-.06-.78l6 .84c.06.3.06.66.06 1.02 0 5.4-5.28 8.4-11.76 8.4-8.04 0-13.86-4.62-13.86-14.94zm13.62-11.7c-2.76 0-5.04 2.04-5.82 7.5h10.56v-1.02c0-3.48-1.38-6.48-4.74-6.48zM88.2 44.26c0-6.36 6.06-9.54 12.42-9.54 2.64 0 4.02.6 4.62.96v-4.32c0-3.42-1.32-5.1-4.44-5.1-3.66 0-4.8 2.4-3.96 5.7l-7.02-.78c-1.56-6.84 4.2-9.72 11.4-9.72 7.98 0 11.34 3.48 11.34 9.9v13.26c0 1.38.36 2.04 1.2 2.04 1.08 0 1.92-.96 1.92-.96l.42 5.22s-2.04 1.5-4.92 1.5c-2.94 0-4.98-1.5-5.46-4.62-1.56 2.94-4.56 4.92-8.46 4.92-5.16 0-9.06-3.48-9.06-8.46zm11.28 3.18c2.46 0 4.26-1.38 5.76-3.06v-5.16c-.6 0-1.38-.06-2.34-.06-4.8 0-7.44 1.44-7.44 4.62 0 2.46 1.62 3.66 4.02 3.66zM120.96 52V22.18h5.58l1.02 5.52c1.2-3.18 3.6-6.24 8.1-6.24 6.24 0 7.62 6.66 5.7 11.28l-6.3.84c.84-2.4.96-6-2.04-6-2.64 0-3.96 2.46-4.68 4.56V52h-7.38zm25.86 0V22.18h5.58l.9 4.86c2.22-3.24 4.68-5.58 9.36-5.58 5.04 0 8.88 2.82 8.88 9.18V52h-7.38V32.08c0-3.24-1.2-4.68-3.96-4.68-2.64 0-4.44 1.26-6 2.88V52h-7.38zm47.46-34.86V11.5h17.46v28.8c0 7.5-4.2 12.42-12.18 12.42-8.52 0-13.14-5.52-10.98-13.5l6.84-.72c-1.26 5.16-.06 8.4 3.96 8.4 3.06 0 4.62-1.92 4.62-5.58V17.14h-9.72zm23.94 22.62l6.9-.72c-1.08 4.26 1.2 7.98 8.1 7.98 5.46 0 7.2-2.4 7.2-5.16 0-3.66-3.3-5.04-8.04-6.66-5.76-1.98-13.44-4.38-13.44-12.84 0-7.2 5.52-11.7 14.88-11.58 11.04.12 14.94 6.42 13.74 13.32l-7.32.72c.78-5.76-1.56-8.46-6.96-8.46-4.56 0-6.54 2.04-6.54 5.04 0 4.02 3.72 5.34 8.4 6.9 6.06 1.98 13.02 4.32 13.02 12.36 0 6.84-5.1 12.06-15.24 12.06-9.48 0-16.08-4.5-14.7-12.96z"
      fill="#000"
      fill-rule="nonzero"
    />
  </g>
</svg>
</a>
          <button data-type="secondary" data-js="menu-button">Menu</button>
        </div>
        <div>
          <a href="../index.html">Contents</a>
          <a href="../../components/index.html">Components</a>
          <a href="../../community/index.html">Community</a>
          <a href="../../extras/index.html">Extras</a>
        </div>
        <div>
          <a href="../..https://nerd-dir.com">Account</a>
          <button data-type="secondary" data-js="logout">OpenDir</button>
        </div>
      </nav>

    <noscript>
      <div class="wrap">
        This portal uses JavaScript to check your identity. Please enable JavaScript to access the course.
      </div>
    </noscript>

    <main>
      <div class="wrap">
<div
  data-js="check-auth"
  data-required-authorization="mastery"
  data-auth-state="failure"
>
  <article class="longform" data-failed-content>
    <h1>üõ†Ô∏è Tabby: Adding keyboard interaction</h1>
    <p>Hey <span data-js="user-data" data-field="firstName">,</p>
      <p>
      I'm thrilled to help you learn JavaScript. Unfortunately, you've landed on a page where you cannot access with your current purchase.
    </p>
      <p>
      Please upgrade (<a href="../../404/index.html" data-upgrade-link
        >use this link</a
      >) access this content.
    </p>

      <p>I'm super eager to help you learn more!</p>
    </article>

    <article class="longform" data-content>
      <h1>üõ†Ô∏è Tabby: Adding keyboard interaction</h1>



      <div class="meta source-code">


    <a href="../../download/components/tabby/05.keyboard.zip">
      <svg class="icon" viewBox="0 0 20 20" height="1em">
        <path fill="currentColor" d="M.7 9.3l4.8-4.8 1.4 1.42L2.84 10l4.07 4.07-1.41 1.42L0 10l.7-.7zm18.6 1.4l.7-.7-5.49-5.49-1.4 1.42L17.16 10l-4.07 4.07 1.41 1.42 4.78-4.78z"/>
      </svg>
      <span>Source</span>
    </a>
      </div><p>Let‚Äôs add keyboard interactions to Tabby. You‚Äôre going to learn to do three things here:</p>
<ol>
<li>How to improve the focus</li>
<li>How to change the default tab sequence</li>
<li>How to switch tabs with arrow keys</li>
</ol>
<p>Before we begin, make sure you add this code at the top of your JavaScript file. It resolves inconsistencies between browsers. <a href="https://zellwk.com/blog/inconsistent-button-behavior" title="Inconsistent button behavior across browsers">Read more here</a>.</p>
<pre><code class="language-js">// Resolve browser inconsistencies when clicking on buttons
document.addEventListener('click', event =&gt; {
  if (event.target.matches('button')) {
    event.target.focus()
  }
})
</code></pre>
<h2 id="improving-the-focus">Improving the focus</h2>
<p>Try clicking on (or tabbing into) a <code>.tab</code>. Here‚Äôs what  you‚Äôll see.</p>
<figure role="figure"><img src="../../images/components/tabby/keyboard/focus.gif" alt="Focus is not obvious."></figure>
<p>Did you notice the focus ring?</p>
<p>The purpose of a focus ring is to grab attention. It makes sure the user knows where the focus is on. In this case, the focus  ring doesn‚Äôt have enough contrast (especially on the Digimon Tab) to hold attention. <strong>When the default focus doesn‚Äôt generate enough contrast, you want to create your own focus style.</strong></p>
<p>I wrote more about designing your own focus style in <a href="https://zellwk.com/blog/creating-focus-style" title="Creating a custom focus style">this article</a>.</p>
<p>For Tabby, I chose to style focus with an inner box-shadow.</p>
<pre><code class="language-css">.tab:focus {
  outline: none;
  box-shadow: inset 0 0 0 6px lightskyblue;
}
</code></pre>
<figure role="figure"><img src="../../images/components/tabby/keyboard/focus-restyled.gif" alt="Restyled focus with box-shadow."></figure>
<p><strong>When it comes to design, the #1 rule is consistency.</strong> We want to make sure the focus remains consistent across all focusable elements.</p>
<p>We can set the focus for all elements by using the universal selector (<code>*</code>).</p>
<pre><code class="language-css">*:focus {
  outline: none;
  box-shadow: inset 0 0 0 6px lightskyblue;
}
</code></pre>
<figure role="figure"><img src="../../images/components/tabby/keyboard/focus-restyled.gif" alt="Restyled focus with box-shadow."></figure>
<p>But with this, we have a problem. The inner box-shadow eats into  text links. It makes the links less readable.</p>
<figure role="figure"><img src="../../images/components/tabby/keyboard/focus-links.png" alt="Inner box shadow eats into the links."></figure>
<p>A better way is to set the inner box-shadow only on <code>.tab</code>. Here‚Äôs the CSS you need</p>
<pre><code class="language-css">*:focus {
  outline: none;
  box-shadow: 0 0 0 6px lightskyblue;
}

.tab:focus {
  box-shadow: inset 0 0 0 6px lightskyblue;
}
</code></pre>
<figure role="figure"><img src="../../images/components/tabby/keyboard/focus-links-2.png" alt="Restyled focus links."></figure>
<h2 id="the-tab-sequence">The Tab sequence</h2>
<p>Users use tabbed components in very specific ways. If they use the Tab key, they expect to:</p>
<ol>
<li>First Tab: To go to the selected tab</li>
<li>Second Tab: To go to the first focusable element in tab-content</li>
<li>Third Tab: Next focusable element (or exit the component if there are no more focusable elements)</li>
</ol>
<figure role="figure"><img src="../../images/components/tabby/keyboard/tab-sequence.png" alt="Tab sequence."></figure>
<p>Right now, the Tab key switches between tabs.</p>
<figure role="figure"><img src="../../images/components/tabby/keyboard/tab-sequence-current.gif" alt="Current Tab sequence."></figure>
<p>We need to prevent users from tabbing into unselected tabs. The easiest way is to use the <strong>roving tabindex method</strong> where you:</p>
<ol>
<li>Set <code>tabindex</code> to <code>-1</code> for elements that should not be tabbed into.</li>
<li>Remove <code>tabindex</code> for elements that can be tabbed into.</li>
</ol>
<p>To do this, we first set <code>tabindex</code> for deselected tabs to <code>-1</code>.</p>
<pre><code class="language-html">&lt;div class=&quot;tabs&quot;&gt;
  &lt;button ... class=&quot;tab is-selected&quot;&gt;Digimon&lt;/button&gt;
  &lt;button ... class=&quot;tab&quot; tabindex=&quot;-1&quot;&gt;Pokemon&lt;/button&gt;
  &lt;button ... class=&quot;tab&quot; tabindex=&quot;-1&quot;&gt;Tamagotchi&lt;/button&gt;
&lt;/div&gt;
</code></pre>
<p>With this change, users are able to use the Tab key according to what they expect.</p>
<figure role="figure"><img src="../../images/components/tabby/keyboard/tab-sequence-corrected.gif" alt="Corrected tab sequence."></figure>
<p>If the user clicks the second tab, we want to make that tab available. We also want to disable the first tab. This means we:</p>
<ol>
<li>Set <code>tabindex</code> to <code>-1</code> for other tabs</li>
<li>Remove <code>tabindex</code> for the second tab</li>
</ol>
<pre><code class="language-js">tabsList.addEventListener('click', event =&gt; {
  // ...
  // Selects a tab
  tabs.forEach(t =&gt; {
    t.classList.remove('is-selected')
    t.setAttribute('tabindex', '-1') // Disables other tabs
  })
  tab.classList.add('is-selected')
  tab.removeAttribute('tabindex') // Enables current tab
})
</code></pre>
<figure role="figure"><img src="../../images/components/tabby/keyboard/tab-sequence-second-tab.gif" alt="Enabling the second tab."></figure>
<h2 id="switching-tabs">Switching Tabs</h2>
<p>Users cannot select other tabs with the Tab key anymore, but we still need to give them a way to change tabs. For Tabbed components, we let users change tabs with Left and Right arrow keys.</p>
<ul>
<li>Left arrow: Select previous tab</li>
<li>Right arrow: Select next tab</li>
</ul>
<p><strong>There are five steps:</strong></p>
<ol>
<li>Listen for a <code>keydown</code> event.</li>
<li>Check if users pressed the Left or Right arrow keys.</li>
<li>If users press Right, find the next tab.</li>
<li>If users press Left, find the previous tab.</li>
<li>Select the tab.</li>
</ol>
<p><strong>First, we listen for a <code>keydown</code> event.</strong></p>
<pre><code class="language-js">tabsList.addEventListener('keydown', event =&gt; {
  // ...
})
</code></pre>
<p><strong>Second, we change tabs only if users pressed the Left or Right arrow keys.</strong></p>
<pre><code class="language-js">tabsList.addEventListener('keydown', event =&gt; {
  const { key } = event
  if (key === 'ArrowLeft' || key === 'ArrowRight') {
    // Do something
  }
})
</code></pre>
<p>You can use the early-return pattern to improve the code right away. Here, we flip the condition. We do nothing if:</p>
<ol>
<li>Users <em>did not</em> press the Left arrow key,</li>
<li><em>And</em> they <em>did not</em> press the Right arrow key</li>
</ol>
<p>This double-negative sounds confusing in words. But it looks alright in code.</p>
<pre><code class="language-js">tabsList.addEventListener('keydown', event =&gt; {
  const { key } = event
  if (key !== 'ArrowLeft' &amp;&amp; key !== 'ArrowRight') return

  // Do something
})
</code></pre>
<p><strong>Third, if users press Right, we find the next tab.</strong> Here, we need to know which tab the user is on.</p>
<ul>
<li>If they are on the first tab, we look for the second tab</li>
<li>If they are on the second tab, we look for the third tab</li>
<li>If they are on the third tab, we do nothing (because the third tab is the last tab).</li>
</ul>
<p>To find the current tab, we can use <code>findIndex</code>.</p>
<pre><code class="language-js">tabsList.addEventListener('keydown', event =&gt; {
  // ...
  const index = tabs.findIndex(t =&gt; t.classList.contains('is-selected'))
})
</code></pre>
<p>We know this:</p>
<ol>
<li>If <code>index</code> is <code>0</code>, they‚Äôre on the first tab.</li>
<li>If <code>index</code> is <code>tabs.length - 1</code>, they‚Äôre on the last tab.</li>
</ol>
<p>If the user pressed Right, and they‚Äôre not on the last tab, we want to select the next tab. Here, we know the next tab is <code>tabs[index + 1]</code>.</p>
<pre><code class="language-js">tabsList.addEventListener('keydown', event =&gt; {
  // ...
  const index = tabs.findIndex(t =&gt; t.classList.contains('is-selected'))

  if (key === 'ArrowRight' &amp;&amp; index !== tabs.length - 1) {
    const nextTab = tabs[index + 1]
    console.log(nextTab)
  }
})
</code></pre>
<p>There are two ways to select the next tab:</p>
<ol>
<li>Write the code required to select the tab. This means we copy-paste (almost) everything we‚Äôve written in the <code>click</code> event listener.</li>
<li>‚ÄúClick‚Äù on the tab with JavaScript (the better way).</li>
</ol>
<p>We can ‚Äúclick‚Äù on a tab with the <code>click</code> method. Everything else will be handled by our <code>click</code> event listener üòä.</p>
<pre><code class="language-js">tabsList.addEventListener('keydown', event =&gt; {
  // ...
  const index = tabs.findIndex(t =&gt; t.classList.contains('is-selected'))

  if (key === 'ArrowRight' &amp;&amp; index !== tabs.length - 1) {
    const nextTab = tabs[index + 1]
    nextTab.click()
  }
})
</code></pre>
<figure role="figure"><img src="../../images/components/tabby/keyboard/switch-tabs-right.gif" alt="Right arrow key selects next tab."></figure>
<p><strong>Fourth. If the user pressed Left, and they‚Äôre not on the first tab, we want to select the previous tab</strong>. Here, we know the previous tab is <code>tabs[index - 1]</code>.</p>
<p>We select the previous tab with another ‚Äúclick‚Äù.</p>
<pre><code class="language-js">tabsList.addEventListener('keydown', event =&gt; {
  // ...
  if (key === 'ArrowLeft' &amp;&amp; index !== 0) {
    const previousTab = tabs[index - 1]
    previousTab.click()
  }
})
</code></pre>
<figure role="figure"><img src="../../images/components/tabby/keyboard/switch-tabs-left.gif" alt="Switching tabs with the left and right arrow keys."></figure>
<p>We can clean up our code a little by finding the target tab before we ‚Äúclick‚Äù it.</p>
<pre><code class="language-js">tabsList.addEventListener('keydown', event =&gt; {
  // ...
  let targetTab
  if (key === 'ArrowLeft' &amp;&amp; index !== 0) targetTab = tabs[index - 1]
  if (key === 'ArrowRight' &amp;&amp; index !== tabs.length - 1) targetTab = tabs[index + 1]
  if (targetTab) targetTab.click()
})
</code></pre>
<p>That‚Äôs it!</p>
</article>
  </div>



  <div class="longform">
    <nav class="lesson-nav">

          <a href="../accordion-keyboard/index.html" data-link-to="previous-lesson">
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M18.9 38l3.1-3.1L6.1 19 22 3.1 18.9 0 0 19z"
        ></path>
              </svg>
              <span>üõ†Ô∏è Accordion: Adding keyboard interaction</span>
            </a>
          <a href="../tabby-keyboard-refactor/index.html" data-link-to="next-lesson">
              <span>üõ†Ô∏è Tabby: Refactoring</span>
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M3.1 0L0 3.1 15.9 19 0 34.9 3.1 38 22 19z"
        ></path>
              </svg>
            </a>
          </nav>
  </div>
</div>
    </main>



      <script module src="../../js/main-b9439821d7.mjs"></script>
      <script nomodule src="../../js/main-legacy-8c54230a8f.js"></script>
  </body>

<!-- /tabby-keyboard/  Mon, 24 Jan 2022 10:05:17 GMT -->
</html>
