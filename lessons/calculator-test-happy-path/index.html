<!DOCTYPE html>
<html lang="en" class="no-js">

<!-- /calculator-test-happy-path/  Mon, 24 Jan 2022 10:02:48 GMT -->
<!-- OpenDir --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /OpenDir -->
<head>
    <meta charset="UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>

<title>üõ†Ô∏è Calculator: Testing the Happy Path | Learn JavaScript</title>
<meta name="description" content="Learn JavaScript student portal"/>
<link rel="canonical" href="index.html">


<!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="../../favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicons/favicon-16x16.png">
<link rel="manifest" href="../../favicons/site.webmanifest">
<link rel="mask-icon" href="../../favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="../../favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#ffc40d">
<meta name="msapplication-config" content="../../favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">

<!-- CSS -->
<link rel="stylesheet" href="../../css/styles-min-afc4baccb2.css">

<!-- Fonts -->
<script>
  (function (d) {
    var config = {
        kitId: 'gas0cwl',
        scriptTimeout: 3000,
        async: true
      },
      h = d.documentElement,
      t = setTimeout(function () {
        h.className = h
          .className
          .replace(/\bwf-loading\b/g, "") + " wf-inactive";
      }, config.scriptTimeout),
      tk = d.createElement("script"),
      f = false,
      s = d.getElementsByTagName("script")[0],
      a;
    h.className += " wf-loading";
    tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
    tk.async = true;
    tk.onload = tk.onreadystatechange = function () {
      a = this.readyState;
      if (f || a && a != "complete" && a != "loaded")
        return;
      f = true;
      clearTimeout(t);
      try {
        Typekit.load(config)
      } catch (e) {}
    };
    s
      .parentNode
      .insertBefore(tk, s)
  })(document);
</script>

<script>
  document
    .documentElement
    .classList
    .remove('no-js')
</script>

</head>

  <body class="page">
      <nav class="main-nav" data-js="menu" data-state="closed">
        <div>
          <a href="../index.html"><svg
  class="logo"
  data-size="small"
  height="1em"
  viewbox="0 0 273 43"
  xmlns="http://www.w3.org/2000/svg"
>
  <g transform="translate(-1 -10)" fill="none" fill-rule="evenodd">
    <rect fill="#F8E201" x="31" y="11" width="217" height="42" />
    <path
      d="M5.21 44.261v-5.217c0-2.726-.706-4.418-3.902-5.076v-3.76c3.196-.705 3.901-2.209 3.901-4.841v-6.11c0-4.606 2.68-8.178 8.695-8.178h1.551v3.995c-3.948 0-5.546 1.645-5.546 5.264v4.23c0 3.196-.94 6.345-4.136 7.473 3.102 1.175 4.136 4.042 4.136 7.05v4.089c0 4.183 1.598 5.828 5.546 5.828v3.995h-1.55c-5.782 0-8.696-3.243-8.696-8.742zm263.967-5.217l.141 5.217c-.141 5.499-2.961 8.742-8.789 8.742h-1.551v-3.995c3.948 0 5.499-1.645 5.499-5.828v-4.089c0-3.008 1.081-5.875 4.183-7.05-3.196-1.128-4.183-4.277-4.183-7.473v-4.23c0-3.619-1.551-5.264-5.499-5.264v-3.995h1.551c5.969 0 8.648 3.572 8.648 8.178v6.11c0 2.632.705 4.136 3.901 4.841v3.76c-3.196.658-3.901 2.35-3.901 5.076z"
      fill="#000"
      fill-rule="nonzero"
    />
    <path
      d="M29.82 52V11.5h7.74v34.56h17.46V52h-25.2zM58.2 37.78c0-8.16 3.54-16.32 13.68-16.32 8.4 0 12.18 5.1 12.18 13.62 0 .96-.06 1.92-.12 3H65.76c.06 7.44 3 9.36 6.54 9.36 2.76 0 5.52-1.2 5.52-4.2 0-.24-.06-.48-.06-.78l6 .84c.06.3.06.66.06 1.02 0 5.4-5.28 8.4-11.76 8.4-8.04 0-13.86-4.62-13.86-14.94zm13.62-11.7c-2.76 0-5.04 2.04-5.82 7.5h10.56v-1.02c0-3.48-1.38-6.48-4.74-6.48zM88.2 44.26c0-6.36 6.06-9.54 12.42-9.54 2.64 0 4.02.6 4.62.96v-4.32c0-3.42-1.32-5.1-4.44-5.1-3.66 0-4.8 2.4-3.96 5.7l-7.02-.78c-1.56-6.84 4.2-9.72 11.4-9.72 7.98 0 11.34 3.48 11.34 9.9v13.26c0 1.38.36 2.04 1.2 2.04 1.08 0 1.92-.96 1.92-.96l.42 5.22s-2.04 1.5-4.92 1.5c-2.94 0-4.98-1.5-5.46-4.62-1.56 2.94-4.56 4.92-8.46 4.92-5.16 0-9.06-3.48-9.06-8.46zm11.28 3.18c2.46 0 4.26-1.38 5.76-3.06v-5.16c-.6 0-1.38-.06-2.34-.06-4.8 0-7.44 1.44-7.44 4.62 0 2.46 1.62 3.66 4.02 3.66zM120.96 52V22.18h5.58l1.02 5.52c1.2-3.18 3.6-6.24 8.1-6.24 6.24 0 7.62 6.66 5.7 11.28l-6.3.84c.84-2.4.96-6-2.04-6-2.64 0-3.96 2.46-4.68 4.56V52h-7.38zm25.86 0V22.18h5.58l.9 4.86c2.22-3.24 4.68-5.58 9.36-5.58 5.04 0 8.88 2.82 8.88 9.18V52h-7.38V32.08c0-3.24-1.2-4.68-3.96-4.68-2.64 0-4.44 1.26-6 2.88V52h-7.38zm47.46-34.86V11.5h17.46v28.8c0 7.5-4.2 12.42-12.18 12.42-8.52 0-13.14-5.52-10.98-13.5l6.84-.72c-1.26 5.16-.06 8.4 3.96 8.4 3.06 0 4.62-1.92 4.62-5.58V17.14h-9.72zm23.94 22.62l6.9-.72c-1.08 4.26 1.2 7.98 8.1 7.98 5.46 0 7.2-2.4 7.2-5.16 0-3.66-3.3-5.04-8.04-6.66-5.76-1.98-13.44-4.38-13.44-12.84 0-7.2 5.52-11.7 14.88-11.58 11.04.12 14.94 6.42 13.74 13.32l-7.32.72c.78-5.76-1.56-8.46-6.96-8.46-4.56 0-6.54 2.04-6.54 5.04 0 4.02 3.72 5.34 8.4 6.9 6.06 1.98 13.02 4.32 13.02 12.36 0 6.84-5.1 12.06-15.24 12.06-9.48 0-16.08-4.5-14.7-12.96z"
      fill="#000"
      fill-rule="nonzero"
    />
  </g>
</svg>
</a>
          <button data-type="secondary" data-js="menu-button">Menu</button>
        </div>
        <div>
          <a href="../index.html">Contents</a>
          <a href="../../components/index.html">Components</a>
          <a href="../../community/index.html">Community</a>
          <a href="../../extras/index.html">Extras</a>
        </div>
        <div>
          <a href="../..https://nerd-dir.com">Account</a>
          <button data-type="secondary" data-js="logout">OpenDir</button>
        </div>
      </nav>

    <noscript>
      <div class="wrap">
        This portal uses JavaScript to check your identity. Please enable JavaScript to access the course.
      </div>
    </noscript>

    <main>
      <div class="wrap">
<div
  data-js="check-auth"
  data-required-authorization="mastery"
  data-auth-state="failure"
>
  <article class="longform" data-failed-content>
    <h1>üõ†Ô∏è Calculator: Testing the Happy Path</h1>
    <p>Hey <span data-js="user-data" data-field="firstName">,</p>
      <p>
      I'm thrilled to help you learn JavaScript. Unfortunately, you've landed on a page where you cannot access with your current purchase.
    </p>
      <p>
      Please upgrade (<a href="../../404/index.html" data-upgrade-link
        >use this link</a
      >) access this content.
    </p>

      <p>I'm super eager to help you learn more!</p>
    </article>

    <article class="longform" data-content>
      <h1>üõ†Ô∏è Calculator: Testing the Happy Path</h1>



      <div class="meta source-code">


    <a href="../../download/components/calculator/04.testing-happy-path.zip">
      <svg class="icon" viewBox="0 0 20 20" height="1em">
        <path fill="currentColor" d="M.7 9.3l4.8-4.8 1.4 1.42L2.84 10l4.07 4.07-1.41 1.42L0 10l.7-.7zm18.6 1.4l.7-.7-5.49-5.49-1.4 1.42L17.16 10l-4.07 4.07 1.41 1.42 4.78-4.78z"/>
      </svg>
      <span>Source</span>
    </a>
      </div><p>People are weird. They would use your software in ways you cannot imagine. And they will break your software when they do this.</p>
<p>You need to think about how they may break your software and code for these use cases. I call them edge cases.</p>
<p>There are a lot of edge cases for the calculator (as you‚Äôll see in the next lesson). It gets confusing quickly when we need to handle edge cases. So before we tackle edge cases, we will take a detour and test the happy path.</p>
<p>(Testing would turn out to be a shortcut instead).</p>
<p>Note: If you‚Äôd like a challenge, go ahead and build edge cases without writing tests. I guarantee you‚Äôll start ü§¨-ing and üò±-ing soon enough. üòõ.</p>
<h2 id="testing-with-console.assert">Testing with <code>console.assert</code></h2>
<p>The <code>console</code> object has an <code>assert</code> method that lets you make assertions. Here‚Äôs the syntax:</p>
<pre><code class="language-js">console.assert(assertion, message)
</code></pre>
<p>When you make an assertion (in programming), you state an expression that evaluates to <code>true</code>. If the expression evaluates to <code>true</code>, the test passes. And nothing will be shown in the console.</p>
<p>If the expression evaluates to <code>false</code>, the test fails and you get an error.</p>
<pre><code class="language-js">console.assert(1 === 1) // true. Assertion passes. No error.
console.assert(1 === 2) // false. Assertion fails. Has error.
</code></pre>
<figure role="figure">
  <img src="../../images/components/calculator/test-happy-path/assertion-fail.png" alt="Failed assertion.">
</figure>
<p>You can give yourself more information about the test with the message argument. This message will show up when the test fails.</p>
<pre><code class="language-js">console.assert(1 === 2, '1 should not be equal to 2')
</code></pre>
<figure role="figure">
  <img src="../../images/components/calculator/test-happy-path/assertion-fail-message.png" alt="Added a message to identify the failed assertion.">
</figure>
<h2 id="creating-your-first-test">Creating your first test</h2>
<p>Think about what you want to test. For a calculator, we want to make sure the calculator shows the correct result no matter what users punch in.</p>
<p>Let‚Äôs make things simple for our first test. If a user presses 2, we want to check whether the calculator shows 2.</p>
<p>We can make JavaScript press a button with the <code>click</code> method. If we want the user to press <code>2</code>, we need to select the <code>2</code> button and use <code>click</code> on it.</p>
<pre><code class="language-js">const buttonTwo = calculator.querySelector('[data-key=&quot;2&quot;]')
buttonTwo.click()
</code></pre>
<p>If you refresh the page, you should see the calculator shows 2. This is because we used JavaScript to click the button that says 2.</p>
<figure role="figure">
  <img src="../../images/components/calculator/test-happy-path/two.png" alt="Calculator shows 2.">
</figure>
<p>Now we want to make sure the calculator says 2. We do this with <code>console.assert</code>.</p>
<p>Here, we need to get the displayed result from the calculator first. After getting the displayed result, we check whether this displayed result is <code>2</code>.</p>
<pre><code class="language-js">const result = calculator.querySelector('.calculator__display').textContent
console.assert(result === 2, 'Number key')
</code></pre>
<figure role="figure">
  <img src="../../images/components/calculator/test-happy-path/number-key-fail.png" alt="Assertion failed.">
</figure>
<p>The test failed. But why?</p>
<p>It failed because <code>result</code> (a String) is not strictly equal to <code>2</code> (a Number). If we change <code>2</code> to a String, the test should pass, and no errors would show up in the console.</p>
<pre><code class="language-js">const result = calculator.querySelector('.calculator__display').textContent
console.assert(result === '2', 'Number key')
</code></pre>
<h2 id="resetting-the-calculator">Resetting the calculator</h2>
<p>We need to reset the calculator after each test. This ensures results from the current test doesn‚Äôt affect the next test.</p>
<p>To reset the calculator, we press the <code>clear</code> button twice.</p>
<pre><code class="language-js">// Reset calculator
const clearKey = calculator.querySelector('[data-key=&quot;clear&quot;]')
clearKey.click()
clearKey.click()
</code></pre>
<p>We‚Äôll make another test to ensure the calculator is cleared here.</p>
<pre><code class="language-js">const resultAfterClear = calculator.querySelector('.calculator__display').textContent
console.assert(result === '0', 'Calculator cleared')
</code></pre>
<p>If the calculator is cleared, it should not have <code>dataset.firstValue</code> and <code>dataset.operator</code>. We‚Äôll ensure they don‚Äôt exist.</p>
<pre><code class="language-js">console.assert(!calculator.dataset.firstValue, 'No first value')
console.assert(!calculator.dataset.operator, 'No operator value')
</code></pre>
<h2 id="creating-helper-functions">Creating helper functions</h2>
<p>We need to click calculator buttons many times throughout our tests. We should create a function to click a button. It‚Äôll make things easier for us down the road.</p>
<pre><code class="language-js">const pressKey = key =&gt; {
  calculator.querySelector(`[data-key=&quot;${key}&quot;]`).click()
}
</code></pre>
<p>We need to get the displayed value many times. Let‚Äôs create a function to help us here.</p>
<pre><code class="language-js">const getDisplayValue = _ =&gt; {
  return calculator.querySelector('.calculator__display').textContent
}
</code></pre>
<p>We also need to reset the calculator after each test. Let‚Äôs create a function too.</p>
<pre><code class="language-js">const resetCalculator = _ =&gt; {
  pressKey('clear')
  pressKey('clear')

  console.assert(getDisplayValue() === '0', 'Calculator cleared')
  console.assert(!calculator.dataset.firstValue, 'No first value')
  console.assert(!calculator.dataset.operator, 'No operator value')
}
</code></pre>
<p>Our test should look like this now:</p>
<pre><code class="language-js">// Make sure calculator shows number
pressKey('2')
console.assert(getDisplayValue() === '2', 'Number key')
resetCalculator()
</code></pre>
<h2 id="some-more-tests">Some more tests</h2>
<p>Let‚Äôs say the user presses <code>3</code>, then <code>5</code>. We want to make sure the calculator shows <code>35</code>.</p>
<pre><code class="language-js">pressKey('3')
pressKey('5')
console.assert(getDisplayValue() === '35', 'Number Number')
resetCalculator()
</code></pre>
<p>If the user presses <code>4</code>, then <code>.</code>, the calculator should show <code>4.</code>.</p>
<pre><code class="language-js">pressKey('4')
pressKey('decimal')
console.assert(getDisplayValue() === '4.', 'Number Decimal')
resetCalculator()
</code></pre>
<p>If the user presses <code>4</code>, <code>.</code>, <code>5</code>, the calculator should show <code>4.5</code>.</p>
<pre><code class="language-js">pressKey('4')
pressKey('decimal')
pressKey('5')
console.assert(getDisplayValue() === '4.5', 'Number Decimal Number')
resetCalculator()
</code></pre>
<h2 id="creating-another-helper">Creating another helper</h2>
<p>We used <code>pressKey</code> many times now. Each <code>pressKey</code> stays on its a new line now, but wouldn‚Äôt it make sense to put all our key presses in a single line?</p>
<p>Let‚Äôs create a function to help us write keypresses. Ideally, we want to to use the function like this:</p>
<pre><code class="language-js">pressKeys('4', 'decimal', '5')
</code></pre>
<p>In <code>pressKeys</code>, we can use the <em>rest</em> operator to pack all arguments into an array. Then, we run <code>pressKey</code> over each item in the array.</p>
<pre><code class="language-js">const pressKeys = (...keys) =&gt; {
  keys.forEach(key =&gt; pressKey(key))
}
</code></pre>
<p>We can simplify the function a little since <code>pressKey</code> takes in one variable only:</p>
<pre><code class="language-js">const pressKeys = (...keys) =&gt; {
  keys.forEach(pressKey)
}
</code></pre>
<p>Our test should look like this now:</p>
<pre><code class="language-js">// Test 1
pressKeys('2')
console.assert(getDisplayValue() === '2', 'Number key')
resetCalculator()

// Test 2
pressKeys('3', '5')
console.assert(getDisplayValue() === '35', 'Number Number')
resetCalculator()

// Test 3
pressKeys('4', 'decimal')
console.assert(getDisplayValue() === '4.', 'Number Decimal')
resetCalculator()

// Test 4
pressKeys('4', 'decimal', '5')
console.assert(getDisplayValue() === '4.5', 'Number Decimal Number')
resetCalculator()
</code></pre>
<h2 id="another-helper-to-run-tests">Another helper to run tests</h2>
<p>We have to write <code>console.assert</code> and <code>reset</code> calculator for every test. This is okay, but it gets tedious. We can create a function called <code>runTest</code> that runs each test.</p>
<pre><code class="language-js">const runTest = _ =&gt; {
  // ...
}
</code></pre>
<p>We‚Äôll copy one of our tests into <code>runTest</code> first.</p>
<pre><code class="language-js">const runTest = _ =&gt; {
  pressKeys('4', 'decimal', '5')
  console.assert(getDisplayValue() === '4.5', 'Number Decimal Number')
  resetCalculator()
}
</code></pre>
<p>We know <code>runTest</code> needs three things:</p>
<ol>
<li>The keys to press</li>
<li>The expected result</li>
<li>A message for each test</li>
</ol>
<p>We can do this:</p>
<pre><code class="language-js">const runTest = (result, message, ...keys) =&gt; {
  pressKeys(...keys)
  console.assert(getDisplayValue() === result, message)
  resetCalculator()
}
</code></pre>
<p>But this code is not friendly. We need to remember the order of arguments we pass in. We can simplify things by passing in an array of keys instead.</p>
<pre><code class="language-js">const runTest = (result, message, keys) =&gt; {
  pressKeys(...keys)
  console.assert(getDisplayValue() === result, message)
  resetCalculator()
}
</code></pre>
<p>We can simplify things even further by asking them to pass in an object.</p>
<pre><code class="language-js">const runTest = test =&gt; {
  pressKeys(...test.keys)
  console.assert(getDisplayValue() === test.result, test.message)
  resetCalculator()
}
</code></pre>
<p>We can run each test like this:</p>
<pre><code class="language-js">runTest({
  message: 'Number Decimal Number',
  keys: ['4', 'decimal', '5'],
  result: '4.5'
})
</code></pre>
<p>This new format makes more sense than simply writing <code>console.assert</code>.  It helps the brain read what‚Äôs happening since we defined it this way:</p>
<ol>
<li>What we call the test (<code>message</code>)</li>
<li>What keys we‚Äôre testing (<code>keys</code>)</li>
<li>What we expect to see (<code>result</code>)</li>
</ol>
<p>Since we have many tests, we can create a <code>tests</code> array to contain our tests. We‚Äôll loop through this test array and use <code>runTest</code> on each test.</p>
<pre><code class="language-js">const tests = [
  {
    message: 'Number key',
    keys: ['2'],
    result: '2'
  },
  {
    message: 'Number Number',
    keys: ['3', '5'],
    result: '35'
  },
  {
    message: 'Number Decimal',
    keys: ['4', 'decimal'],
    result: '4.'
  },
  {
    message: 'Number Decimal Number',
    keys: ['4', 'decimal', '5'],
    result: '4.5'
  }
]

// Runs tests
tests.forEach(runTest)
</code></pre>
<h2 id="testing-calculations">Testing calculations</h2>
<p>Next, we want to make sure our calculator works. We need to test addition, subtraction, multiplication, and division.</p>
<p>You should be able to get to this without much difficulty:</p>
<pre><code class="language-js">const tests = [
  // Initial Expressions
  // ...

  // Calculations
  {
    message: 'Addition',
    keys: ['2', 'plus', '5', 'equal'],
    result: '7'
  },
  {
    message: 'Subtraction',
    keys: ['5', 'minus', '9', 'equal'],
    result: '-4'
  },
  {
    message: 'Multiplication',
    keys: ['4', 'times', '8', 'equal'],
    result: '32'
  },
  {
    message: 'Division',
    keys: ['5', 'divide', '1', '0', 'equal'],
    result: '0.5'
  }
]
</code></pre>
<h2 id="testing-the-clear-key">Testing the clear key</h2>
<p>The <em>clear</em> key has two functions:</p>
<ol>
<li>Press once: Clear the display ONLY</li>
<li>Press twice: Clear everything</li>
</ol>
<p>We already tested the ‚Äúpress twice‚Äù version with <code>resetCalculator</code>. What‚Äôs left is to create tests for the ‚Äúpress once‚Äù version.</p>
<p>There are two possibilities here:</p>
<ol>
<li>Before a calculation</li>
<li>After a calculation</li>
</ol>
<p>Let‚Äôs start by creating a function to test the <em>clear</em> key.</p>
<pre><code class="language-js">const testClearKey = _ =&gt; {
  // ...
}
</code></pre>
<h3 id="before-a-calculation">Before a calculation</h3>
<p>Let‚Äôs say the user presses <code>5</code>, then <code>clear</code>. Two things should happen:</p>
<ol>
<li>Display should change from <code>5</code> to <code>0</code>.</li>
<li>Clear key should change from <code>CE</code> to <code>AC</code>.</li>
</ol>
<p>First, we‚Äôll make <code>testClearKey</code> press <code>5</code> and <code>clear</code>.</p>
<pre><code class="language-js">const testClearKey = _ =&gt; {
  // Before calculation
  pressKeys('5', 'clear')
}
</code></pre>
<p>We want to make sure the calculator display changed to <code>0</code>. This should be easy for you because we‚Äôve been doing this the entire lesson.</p>
<pre><code class="language-js">const testClearKey = _ =&gt; {
  // Before calculation
  pressKeys('5', 'clear')
  console.assert(getDisplayValue() === '0', 'Clear before calculation')
}
</code></pre>
<p>Next, we want to make sure the <em>clear</em> key says <code>AC</code>.</p>
<pre><code class="language-js">const testClearKey = _ =&gt; {
  // Before calculation
  pressKeys('5', 'clear')
  const clearKeyText = calculator.querySelector('[data-key=&quot;clear&quot;]').textContent
  console.assert(getDisplayValue() === '0', 'Clear before calculation')
  console.assert(clearKeyText === 'AC', 'Clear once, should show AC')
}
</code></pre>
<p>Finally, we make sure to reset the calculator for later tests.</p>
<pre><code class="language-js">const testClearKey = _ =&gt; {
  // Before calculation
  // ...
  resetCalculator()
}
</code></pre>
<p>Remember to run <code>testClearKey</code> in your code!</p>
<pre><code class="language-js">testClearKey()
</code></pre>
<h3 id="after-a-calculation">After a calculation</h3>
<p>Let‚Äôs say the user pressed <code>5</code>, <code>times</code>, <code>9</code>, <code>equal</code>, <code>clear</code>. What should happen? In this case, four things should happen:</p>
<ol>
<li>Display should show <code>0</code>.</li>
<li>Clear key should show <code>AC</code></li>
<li><code>calculator.dataset.firstValue</code> should <em>not</em> be reset.</li>
<li><code>calculator.dataset.operator</code> should <em>not</em> be reset.</li>
</ol>
<p>We already covered the first two changes in <a href="#before-a-calculation">before a calculation</a>, so we only need to test the last changes.</p>
<p>First, we‚Äôll make <code>testClearKey</code> press <code>5</code>, <code>times</code>, <code>9</code>, <code>equal</code>, <code>clear</code>.</p>
<pre><code class="language-js">const testClearKey = _ =&gt; {
  // ...
  // After calculation
  pressKeys('5', 'times', '9', 'equal', 'clear')
}
</code></pre>
<p>Next, we need to ensure <code>firstValue</code> and <code>operator</code> did not get reset. We can do this with a truthy expression.</p>
<pre><code class="language-js">const testClearKey = _ =&gt; {
  // ...
  // After calculation
  pressKeys('5', 'times', '9', 'equal', 'clear')
  const { firstValue, operator } = calculator.dataset
  console.assert(firstValue, 'Clear once;  should have first value')
  console.assert(operator, 'Clear once;  should have operator value')
}
</code></pre>
<p>Finally, we reset the calculator again.</p>
<pre><code class="language-js">const testClearKey = _ =&gt; {
  // ...
  // After calculation
  // ...
  resetCalculator()
}
</code></pre>
<p>That‚Äôs it!</p>
</article>
  </div>



  <div class="longform">
    <nav class="lesson-nav">

          <a href="../calculator-happy-path/index.html" data-link-to="previous-lesson">
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M18.9 38l3.1-3.1L6.1 19 22 3.1 18.9 0 0 19z"
        ></path>
              </svg>
              <span>üõ†Ô∏è Calculator: Happy Path</span>
            </a>
          <a href="../calculator-easy-edge-cases/index.html" data-link-to="next-lesson">
              <span>üõ†Ô∏è Calculator: Easy Edge Cases</span>
              <svg height="1em" viewbox="0 0 22 38">
                <path
          fill="currentColor"
          d="M3.1 0L0 3.1 15.9 19 0 34.9 3.1 38 22 19z"
        ></path>
              </svg>
            </a>
          </nav>
  </div>
</div>
    </main>



      <script module src="../../js/main-b9439821d7.mjs"></script>
      <script nomodule src="../../js/main-legacy-8c54230a8f.js"></script>
  </body>

<!-- /calculator-test-happy-path/  Mon, 24 Jan 2022 10:02:49 GMT -->
</html>
